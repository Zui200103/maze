// 遊戲配置
const config = {
    initialZoom: 1,
    minZoom: 0.1,
    maxZoom: 50,
    targetRadius: 2,
    trailOpacity: 0.5,
    zoomSpeed: 0.1
};

// 遊戲狀態
const gameState = {
    isInitialized: false,
    isLoading: true,
    error: null
};

  function drawObjects(ctx, zoomFactor, offsetX, offsetY) {
    objects.forEach(obj => {
      // 計算縮放後的坐標與大小
      const scaledX = obj.x * zoomFactor + offsetX;
      const scaledY = obj.y * zoomFactor + offsetY;
      const scaledWidth = obj.width * zoomFactor;
      const scaledHeight = obj.height * zoomFactor;
  
      // 繪製物件
      ctx.fillStyle = "blue";
      ctx.fillRect(scaledX, scaledY, scaledWidth, scaledHeight);
  
      // 繪製文字
      ctx.fillStyle = "white";
      ctx.font = `${12 * zoomFactor}px Arial`;
      ctx.fillText(obj.text, scaledX + 5, scaledY + 15);
    });
  }

class MazeGame {
    constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.ctx = this.canvas.getContext('2d');
        this.initializeCanvas();
        // 添加觸控相關狀態
        this.touchStartX = 0;
        this.touchStartY = 0;
        this.lastTouchDistance = 0;
        this.isTouching = false;
        this.isMultiTouch = false;
        
        // 初始化移動端視圖
        this.initMobileView();
        // 遊戲狀態
        this.zoomFactor = config.initialZoom;
        this.offsetX = 0;
        this.offsetY = 0;
        this.isDragging = false;
        this.lastMouseX = 0;
        this.lastMouseY = 0;
        // 原有的建構函式內容
        // 加入新的變數追蹤上一個有效的滑鼠位置
        this.lastValidMouseX = null;
        this.lastValidMouseY = null;
        // 添加邊界檢測的邊距
        this.boundaryMargin = 10; // 距離邊緣多少像素時觸發
        // 修改終點屬性，加入原始座標
        this.endpoint = {
            originalX: 1445,
            originalY: 1134,
            radius: 15,
            x: 100,  // 這將被動態更新
            y: 1130,  // 這將被動態更新
        };
        this.hasReachedEnd = false;
        this.fadeAlpha = 0;
        this.congratsAlpha = 0;
        this.isTransitioning = false;
        this.congratsTimeout = null;
        this.coloredImage = new Image();
        this.coloredImage.src = './images/紫禁城平面圖上色.png';
        // 綁定觸控事件
        this.bindTouchEvents();
        
        // 目標物件
        this.target = {
            x: 80,
            y: 1130,
            radius: config.targetRadius,
            color: 'red',
            borderColor: 'blue',
            following: false,
            trail: []
        };

        // 添加地點物件
        this.locations1 = [
           
            { 
                x: 738, 
                y: 25, 
                width: 54, 
                height: 21, 
                text: "神武門", 
                description: "紫禁城的四座大門分別為：正門是午門，東門叫東華門，西門叫西華門，北門名玄武門。按照風水中的四象學中的左青龍，右白虎，前朱雀，後玄武，玄武主北方，所以帝王宮殿的北宮門多取名「玄武」。清康熙年間因避諱其名字玄燁改稱「神武門」，其在形制上比午門低一個等級。它是宮內日常出入的門禁。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 335, 
                y: 1026, 
                width: 48, 
                height: 15, 
                text: "武英殿", 
                description: "武英殿是一組建於明代永樂年間的宮殿建築，位於北京故宮外朝熙和門以西，正殿武英殿南向，面闊5間，進深3間，黃琉璃瓦歇山頂。須彌座圍以漢白玉石欄，前出月台，有甬路直通武英門。在明朝初期帝王齋居、召見大臣這些隆重的活動都是集中在武英殿的，崇禎年間皇后千秋、命婦朝賀儀也在此舉行，足見其在明朝的地位。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1057, 
                y: 1028, 
                width: 48, 
                height: 15, 
                text: "文華殿", 
                description: "文華殿起初是皇帝常禦之便殿，明朝天順朝、成化朝，太子踐祚以前，首先攝事於文華殿。後來由於眾太子多少，無法參與政事，嘉靖十五年（1536年）將文華殿仍改為皇帝便殿，後來作為每年春秋仲月的經筵之所，文華殿建築隨之由綠琉璃瓦頂改為黃琉璃瓦頂。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1169, 
                y: 650, 
                width: 161, 
                height: 92, 
                text: "南三所", 
                description: "明朝這一帶有端敬殿、端本宮，為東宮太子所居。清乾隆十一年（1746年）在原有遺址上興建三所院落，因其位於寧壽宮以南，故又稱「南三所」，也稱「阿哥所」或「所兒」，嘉慶朝以後多以「麋芳殿」代稱整組建築。南三所共用一座宮門，門內有一東西窄長的小廣場，廣場北側自東向西依序排列3所，每所皆為前後3進，形製完全相同。整個南三間共有房200餘間。南三所位在紫禁城東部，按陰陽五行之說，東方屬木，青色，主生長，故屋頂多覆綠琉璃瓦，並安排皇子在此居住。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 733, 
                y: 380, 
                width: 51, 
                height: 15, 
                text: "乾清宮", 
                description: "乾清宮建築規模為內廷之首，採用黃琉璃瓦重檐五殿頂，座落於單層漢白玉玉石臺基上。乾清宮面闊9間，進深5間，高20米，建築結構為減柱造行形式，以擴大室內空間，設有寶座。明朝的十四個皇帝和清代的順治、康熙兩個皇帝，都以乾清宮為寢宮（自雍正始移居養心殿）。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 498, 
                y: 413, 
                width: 137, 
                height: 88, 
                text: "養心殿", 
                description: "養心殿位於紫禁城內廷西南方，從雍正開始，近二百年來歷代清帝均以此為休息及辦公的地方，因此，養心殿可說是紫禁城的心臟，是支配著大清王朝興衰、詔書發布的重要場所。雍正即位以後，養心殿成為皇帝日常辦公就寢之地，在此批章閱本，召對引見，宣諭籌策漸成為慣例，因而此後清的各代皇帝均以此地做為主要辦公的地方，如晚清時的慈禧太后即在養心殿垂簾聽政，而末代皇帝溥儀宣布退位的詔書，亦是從養心殿發出來的。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1242, 
                y: 380, 
                width: 47, 
                height: 13, 
                text: "寧壽宮", 
                description: "寧壽宮，又稱為乾隆花園，位處紫禁城東北角、寧壽宮區左側長方形的小片區，為一七七一年乾隆親自下旨改建成太上皇宮。但終其一生，乾隆並未有機會在此久住，而這處園林隨後便在他諭令下保持一切規制、不得改建，之後歷任清帝都遵循祖訓，僅將寧壽宮做為宴會祭典場所使用。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 727, 
                y: 1118, 
                width: 70, 
                height: 30, 
                text: "內金水橋", 
                description: "內金水橋位於今北京故宮內太和門前廣場的內金水河上，為五座並列單孔拱券式漢白玉石橋。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 733, 
                y: 672, 
                width: 50, 
                height: 36, 
                text: "中和殿", 
                description: "中和殿是北京紫禁城外朝三大殿之一，位於太和殿與保和殿之間。始建於明永樂十八年（1420年），當時稱「華蓋殿」，後因明嘉靖年間火災重修，改稱「中極殿」，至清順治二年（1645年）才定名為「中和殿」，其中「中和」二字取自《禮記·中庸》中的語句，象徵著天下的根本和道理。中和殿的主要功能是皇帝在前往太和殿參加大典之前的小憩和接受朝拜，並且在祭祀儀式前閱視祭文、祝版和農具，皇太后上徽號時也在此進行。此外，清朝每七年纂修一次的玉牒會在此呈交給皇帝，並舉行隆重的儀式。辛亥革命後，當清遜帝溥儀仍居後宮時，袁世凱意圖稱帝，對三大殿進行裝潢改動，其中中和殿的匾額進行了漢文和滿文的調整。中和殿的建築設計簡潔且充滿象徵性，面積為580平方米，是三大殿中最小的。它的結構為單檐四角攢尖頂，屋面覆有黃色琉璃瓦，中央設有銅胎鎏金寶頂。殿內設有寶座，寶座上方懸掛著乾隆帝御題的匾額「允執厥中」，並有乾隆帝所題對聯，寓意著帝王應保持中正，萬事應遵循天道。中和殿的門窗設計獨特，取材於《大戴禮記》中的「明堂」，避免與其他殿門窗雷同。殿前的排水口設計為龍頭形狀，下雨時會形成「千龍吐水」的景觀，增添了紫禁城的宏偉與神秘感。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 726, 
                y: 609, 
                width: 61, 
                height: 23, 
                text: "保和殿", 
                description: "保和殿是北京故宮外朝三大殿之一，位於中和殿以北，是故宮少數至今仍保留明代原形的建築之一。建於明朝永樂十八年（1420年），最初名為「謹身殿」，經過數次更名，最終在清朝順治二年（1645年）改為「保和殿」，意指「志不外馳，恬神守志」，強調專注與和諧。保和殿的歷史經過了多次變遷。在明朝時，保和殿主要用於皇帝更衣以及其他重大儀式前的準備。到了清朝，每年除夕和正月十五，皇帝會在此舉行宴會，賜宴外藩、王公及高官。順治帝和康熙帝曾經在此居住過，並且為他們的暫時居住設立了專門的名稱。乾隆帝開始將保和殿用作科舉的殿試場所，每科殿試的錄取者會被召集到此地進行重要的考試。辛亥革命後，清朝的末代皇帝溥儀仍居後宮，而袁世凱曾經對這三大殿進行裝修，使其略有改動。保和殿的建築在明代的基礎上進行了改造，采用「減柱造」的特殊法式，減少了殿內前檐的六根金柱，增大了空間。整體結構采用重檐歇山頂，上覆黃色琉璃瓦。殿內外均飾以金龍和璽彩畫，並採用瀝粉貼金的龍形天花。保和殿內的寶座上方懸掛乾隆帝的御題匾額「皇建有極」，強調建立天下最高準則。此外，殿前設有雕刻精美的雲龍石雕，被稱為「雲龍石雕」，是由京西房山的大石窩提供石料，並需要超過萬名工人花費一個月的時間才能完成。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 720, 
                y: 1028, 
                width: 80, 
                height: 17, 
                text: "太和門", 
                description: "太和門是故宮外朝三大殿的正南門，也是紫禁城內最大的宮門及正門，是自天安門南側向北進紫禁城時經過的第四道門（前三道依次為天安門、端門、午門）。太和門建成於明朝永樂十八年（1420年），初稱「奉天門」。明朝嘉靖三十七年六月辛卯重建改稱「大朝門」，嘉靖四十一年（1562年）改稱「皇極門」。清朝順治二年（1645年），改易宮殿名號，門隨大殿改稱為「太和門」。太和門是宮廷最高大的門座。由紫禁城正南的午門進來，首先看到的便是這座大門。太和門兩側各設旁門一座，與太和門平排並列，左邊的叫昭德門，右邊的叫貞度門。於明朝永樂十八年（1420年）建成，初稱「東角門」及「西角門」，嘉靖四十一年（1562年）改為「弘政門」及「宣治門」。現在的名號是在清朝順治二年（1645年）改稱的。明朝時，左邊昭德門為考選鴻臚之地。清朝兩門皆為侍衛值宿處。左右門體量比較矮小，屬於陪襯性的建築物。明朝時，太和門是「禦門聽政」之處，皇帝在太和門接受臣下朝拜及上奏，頒佈詔令，處理政事。清朝初年，皇帝也曾在太和門聽政、賜宴，後來「禦門聽政」改在乾清門進行。清朝順治元年九月（1644年），清朝統治者定鼎北京之後，首位皇帝順治帝在太和門頒佈大赦令。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1064, 
                y: 1082, 
                width: 43, 
                height: 15, 
                text: "文華門", 
                description: "位於文華殿建築群最南端。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1052, 
                y: 996, 
                width: 60, 
                height: 15, 
                text: "主敬殿", 
                description: "文華殿後殿為主敬殿，規制和文華殿略似，但進深稍淺。文華殿與主敬殿之間有穿廊相連。主敬殿以北便是文淵閣前的方池。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1063, 
                y: 938, 
                width: 42, 
                height: 18, 
                text: "文淵閣", 
                description: "文淵閣（滿語：ᡧᡠ᠌ ᡨᡠ᠋ᠩᡤᡠ ᠠᠰᠠᡵᡳ，穆麟德轉寫：šu tunggu asari），位於紫禁城外朝東路、文華殿以北，是清朝皇宮藏書樓。「文淵閣」曾是明朝南京故宮、北京故宮及明中都鳳陽的皇家藏書樓名，庶吉士就學觀政之所。明朝北京文淵閣建於永樂年間，位於文華殿前、內承運庫之後，面對皇城，後來無存。清朝乾隆年間，在北京紫禁城東華門內的文華殿後，明朝聖濟殿舊址，新建了一座文淵閣，於乾隆四十一年（1776年）建成，用以收藏《四庫全書》。此書編纂自乾隆三十八年（1773年），歷經六年完成，正本分藏於文淵閣、文源閣、文津閣、文溯閣（合稱「北四閣」），及後來的文宗閣、文匯閣、文瀾閣（稱「南三閣」）。文淵閣作為皇家藏書樓，規模宏大，內部分層放置經、史、子、集四部分書籍，一層設皇帝寶座，三層設御榻以備皇帝閱覽。文淵閣仿浙江寧波天一閣建築風格，外觀為兩層樓，腰檐處設暗層，頂覆黑琉璃瓦，寓意防火。文淵閣前有方池及石橋，後有假山屏障，整體建築布局精巧。清廷規定，官員經允許可入內閱覽書籍，但不得損壞或攜出。1932年，梁思成與劉敦楨曾維修文淵閣，2013年起對外開放，但僅供外觀參觀。文淵閣屬翰林院體系，乾隆年間設官制管理，設領閣事、直閣事、校理等職位，負責書籍管理及檢曝。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 981, 
                y: 1183, 
                width: 105, 
                height: 68, 
                text: "內閣大堂", 
                description: "內閣大堂位於紫禁城太和門東廡外東南，是清朝大學士直舍，又稱「大學士堂」。1990年代，中國紫禁城學會成立後，內閣大堂成為其會址。內閣大堂的主要建築包括：內閣大堂本體，坐北朝南，面闊三間，覆黃琉璃瓦，大堂前設有屏門四扇及垂花門，並以牆垣與東、西兩廂分隔。東西側各有耳房四間，東為滿票簽房，西為稽查房，均為灰瓦硬山頂。大堂後方為內閣大學士的齋宿區域，其東側設有滿票簽檔子房與典籍廳。其他附屬建築包括漢票簽房，位於內閣大堂東廂房，坐東朝西，面闊三間，為侍讀擬寫草簽、中書繕寫真簽及存放檔案之所；蒙古堂為西廂房，坐西朝東，面闊三間；漢本堂與滿本堂分別位於漢票簽房與蒙古堂南側，均面向紫禁城南城牆，面闊三間；祝版房位於滿本堂之西，是專門負責繕寫大祀祝版的場所。整體建築布局嚴謹，體現內閣辦公的重要地位與功能。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1096, 
                y: 1200, 
                width: 152, 
                height: 13, 
                text: "內閣大庫", 
                description: "內閣大庫位於紫禁城東南隅、內閣大堂以東，是內閣專門用於收貯文書與檔案的庫房。內閣大庫包括兩座建築，均為東西走向的排房，結構以磚石為主，牆面設窗，窗內有鐵柱，窗外加裝鐵板窗，具有較高的安全性。其中，西側建築為紅本庫，用於存放紅本、典籍、關防等文書；東側建築為實錄庫，用於存放書籍、三節表文、表匣、外藩表文等檔案。此外，內閣大庫還收存來自滿本堂的實錄、史書、錄疏、起居注，以及前代帝王功臣畫像等珍貴物品。目前，內閣大庫建築保存完好，展現出當年檔案保管的規模與嚴密性。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1010, 
                y: 653, 
                width: 50, 
                height: 15, 
                text: "箭亭", 
                description: "箭亭位於紫禁城東部景運門外、奉先殿以南的開闊平地上，是清朝皇帝及其子孫名義上用於練習騎馬射箭的場所。然而，清朝皇帝及其眷屬很少長時間居住於紫禁城，實際上皇子皇孫學習騎射的主要場所在圓明園山高水長樓旁的「西廠」或稱「西苑」。箭亭始建於清雍正八年（1730年），其建立旨在防止滿族因受漢化而導致祖制淹沒，乾隆帝和嘉慶帝均曾在此射箭與操演武藝。箭亭前為寬闊的平地，為皇子皇孫練習騎射及殿試武進士的閱技勇之地。箭亭四周亦為清初特許入東華門者下馬之地，為拴歇馬匹之處。箭亭為獨立大殿，坐北朝南，面闊五間，進深三間，黃琉璃瓦歇山頂，建築四面出廊，內有20根朱漆大柱承托梁架，山牆不開窗，南北設有八扇菱花槅扇門。殿內中央設寶座，東側立有乾隆十七年（1752年）上諭臥碣，內容提倡滿清貴族遵守舊制，勤於練習騎射，不效漢俗。嘉慶十三年（1808年），又立碑告誡子孫不忘祖制。箭亭至今保存完好，並於2016年隨紫禁城新增開放區域而向公眾開放，其南側現擺放著根據唐代《五牛圖》製作的銅雕五牛，作為文化展示的一部分。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 337, 
                y: 1090, 
                width: 40, 
                height: 12, 
                text: "武英門", 
                description: "面闊五間（30.4米），進深二間（11.7米），黃琉璃瓦單檐歇山頂，武英門以北有一條帶欄杆的甬路連接正殿武英殿。武英門東、西兩側各有值房（廊房），頂覆黃琉璃瓦。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 326, 
                y: 996, 
                width: 66, 
                height: 13, 
                text: "敬思殿", 
                description: "為後殿，面闊五間，進深三間，黃琉璃瓦單檐歇山頂，單翹單昂斗拱，形制與正殿相同，但進深稍淺。該殿與正殿同在一個「工」字形台基上。兩殿中間有三間的封閉的廊道相連，廊道為中華民國時期加建。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 463, 
                y: 1070, 
                width: 50, 
                height: 20, 
                text: "斷虹橋", 
                description: "斷虹橋位於紫禁城熙和門外、武英殿以東，是一座極其精美的石拱橋，其名稱「斷虹」為俗稱，明清時期文獻中未見記載。該橋為單拱石券結構，南北向橫跨內金水河，全長18.7米，最寬處達9.20米。橋面鋪設漢白玉巨石，兩側石欄板雕刻穿花龍紋，望柱上飾有神態各異的石獅，工藝華麗精緻，是紫禁城內橋樑之冠。斷虹橋的建造年代眾說紛紜，有學者認為始建於明朝初年，也有觀點認為其起源於元朝。橋北一帶古槐成林，素有「十八棵槐」之稱，這片古樹群為紫禁城內特色景觀之一，據傳種植於元朝，現存槐樹雖不足十八棵，但其歷史風貌仍清晰可見。斷虹橋以北區域曾長期不對外開放，直至2016年9月29日，故宮博物院新開放該橋至慈寧宮的南北通道，觀眾可從斷虹橋向北經十八槐至故宮文化資產數位化應用研究所，該所設有VR演播廳供學生團體預約觀看故宮虛擬實境節目，並可繼續北行經故宮冰窖至慈寧宮與隆宗門間的小廣場，完整展現了這一區域的文化與景觀價值。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 195, 
                y: 1024, 
                width: 54, 
                height: 59, 
                text: "寶蘊樓", 
                description: "寶蘊樓位於紫禁城西南，原為咸安宮的舊址，後來成為故宮博物院的院史館。咸安宮建於明朝嘉靖年間，曾是太子住處，清朝初年改建，並設有官學。後來，咸安宮改稱為壽安宮，成為皇太后的住所，並於乾隆時期修繕。1912年，咸安宮遭火災，並隨著古物陳列所的設立，改為寶蘊樓，作為文物收藏與展示的場所。1914年，隨著大量文物運至北京，寶蘊樓成為存放清朝及熱河行宮文物的重點倉庫，並至今保存大量歷代珍貴文物。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 207, 
                y: 1169, 
                width: 77, 
                height: 27, 
                text: "南薰殿", 
                description: "南薰殿位於紫禁城外朝西路，武英殿西南，建於明朝，為安奉歷代帝后及賢臣圖像的場所，是故宮少數保留明代原形的建築之一。名稱來自《禮記·樂記》中的「南風」，寓意以南風熏陶。歷史上，南薰殿在唐代已有，並在南漢與明朝亦有相似建築。明朝時期，閣臣在此撰寫金寶金冊文，並在崇禎三年命武英殿畫歷代賢君圖，清朝乾隆時移至南薰殿。南薰殿為獨立院落，四周圍牆，建築為五間單檐歇山頂，內設朱紅漆木閣，安奉歷代帝王及皇后像。南薰殿的木構和彩畫均為明代遺物，並存有乾隆帝的臥碣。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 258, 
                y: 1206, 
                width: 250, 
                height: 49, 
                text: "南大庫", 
                description: "南大庫位於紫禁城西南角，原為燈庫、木庫和武器庫等多功能庫房區域，現僅保存燈庫。燈庫位於南薰殿東南側，原為儲存燈具的場所。這座廊房覆有黃琉璃瓦，在乾隆京城全圖中標註為「磁器庫」。在南大庫保護管理用房建成前，燈庫曾用作故宮武警總隊的食堂。2013年，故宮博物院啟動了南大庫保護管理用房建設工程，旨在改善武警駐守故宮的條件並騰退相關區域，以利古建築的保護。該工程占地7336平方米，計劃建築面積3966平方米，預計2015年完工。2014年，紫禁城內進行考古發掘，發現了與清朝相關的建築遺址及灰坑，出土大量御窯瓷器碎片，這些發現對研究清朝內務府的工藝生產提供了珍貴資料。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 740, 
                y: 507, 
                width: 40, 
                height: 20, 
                text: "乾清門", 
                description: "乾清門是北京故宮內廷的正門，因乾清宮而得名，過此門便可見乾清宮。該門始建於明朝永樂十八年（1420年），清朝順治十二年（1655年）重修，是皇帝「御門聽政」的地方。順治帝首創在乾清門「御門聽政」的慣例，聽政時間通常為早上8點，奏事官員在門外跪奏，皇帝在門內作出「降旨」決定。康熙帝特別勤政，幾乎每日到此聽政，許多重大決策也在此作出；然而自雍正、乾隆以後，「避喧聽政」的時間增多，乾清門聽政次數逐漸減少，至咸豐帝時停止。乾清門也是齋戒和典禮的舉行地點。乾清門面闊5間，進深3間，建築高約16米，為單檐歇山頂設計，基座為高1.5米的漢白玉須彌座，周圍環繞雕石欄杆，門前有鎏金銅獅和御路石，整體裝飾金碧輝煌。乾清門廣場以北是內廷區域，以南是外朝區域，廣場東西側分別為景運門和隆宗門。門外兩側設有影壁和多功能廬房，分別用於大臣奏事和侍衛值班。2013年，故宮進行乾清門廣場地面翻墁工程，恢復歷史原貌，並向公眾展示傳統技藝。乾清門東側曾有星巴克分店，2007年因輿論爭議撤出，現改為故宮商店。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 568, 
                y: 522, 
                width: 70, 
                height: 18, 
                text: "軍機處", 
                description: "軍機處是清朝康熙、雍正年間創立的中央最高輔弼機構，標誌著君主專制的最高階段。始設於雍正七年（1729年），最初為臨時軍事指揮機構，處理西北用兵事務。後因準噶爾戰爭，擴展職責為常設機構，成為皇帝的秘書班子及參議機構，取代議政王大臣會議和廷議，鞏固皇權。軍機處設於隆宗門內，內部陳設簡樸，辦事效率高，保密制度嚴格。職掌包括起草諭旨、處理奏摺、參與重大政務和案件審議，並隨侍皇帝出巡等。軍機大臣為主要成員，另有軍機章京負責文書工作。此機構在清朝統治期間發揮重要作用，直至宣統三年（1911年）隨責任內閣成立而撤銷。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 739, 
                y: 338, 
                width: 39, 
                height: 22, 
                text: "交泰殿", 
                description: "交泰殿位於北京故宮內廷，位於乾清宮與坤寧宮之間，建於明朝嘉靖年間以前，取名自《易經·泰卦》，寓意天地相交、萬物通泰。其平面為正方形，單檐四角攢尖頂，頂覆黃琉璃瓦，內部裝飾精美，設有盤龍藻井與寶座，並懸掛乾隆帝御書「無為」匾額。清朝時，交泰殿是皇后舉行慶典和管理宮務的重要場所，也是存放「二十五寶」的地方。這些印璽多用於發布詔令、軍事、司法及宗教活動，材質多樣，由宮殿監專責管理。殿內東側陳設有銅壺滴漏，西側放置大自鳴鐘，用於計時。清朝滅亡後，印璽移至故宮博物院珍寶館展出，交泰殿現作宮廷生活原狀陳列。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 731, 
                y: 294, 
                width: 56, 
                height: 16, 
                text: "坤寧宮", 
                description: "坤寧宮是北京故宮內廷後三宮之一。坤寧宮始建於明朝永樂十八年（1420年），正德九年（1514年）和萬曆二十四年（1596年）兩次遭火災，萬曆三十三年（1605年）重建。清朝順治元年（1645年）重修後，經順治十二年（1655年）再次改建成為薩滿祭祀場所，但其“中宮”地位未改變。清朝康熙四年（1665年），康熙帝大婚時，太皇太后指定大婚在坤寧宮行合卺禮。同治帝、光緒帝和溥儀的婚禮也在坤寧宮舉行，並且皇帝和皇后都在婚後短暫居住在此，然後遷入乾清宮或養心殿。雍正以後，皇帝移住養心殿，皇后則不再居住在坤寧宮，轉而選擇東六宮、西六宮之一。坤寧宮仍作為專供薩滿祭祀的場所，並且每天進行祭祀活動。坤寧宮的結構為坐北朝南，設有九間，其中包含用於皇帝大婚的東暖閣，這裡的陳設包括龍鳳喜床等婚禮用品。清朝道光至宣統年間，坤寧宮的東暖閣陳設相對穩定，只在大婚時有所調整。1959年起，坤寧宮內部被改為宮廷生活原狀陳列，並且在2003年到2006年進行了修繕，發現了歷史上的建築特徵如方形銅煙筒內襯等，並進行了保存和展示。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 733, 
                y: 255, 
                width: 52, 
                height: 15, 
                text: "坤寧門", 
                description: "坤寧門，位於北京紫禁城坤寧宮後台階下正中。坤寧門坐南朝北，南為坤寧宮，北通御花園。明朝初年，在御花園欽安殿以北設坤寧門，即如今的順貞門。如今的坤寧門及其東西兩側在明朝是一道圍廊，稱為「遊藝齋」，與御花園相接。明朝嘉靖十四年（1535年），坤寧宮後北圍廊正中的廣運門改建，同時將其改稱「坤寧門」，此名一直沿用至今。清朝順治十二年（1655年），坤寧門重修。坤寧門坐南朝北，面闊三間，單檐歇山頂，覆黃琉璃瓦。明間設有門，中一間裝有宮門兩扇。兩側間隔是值房，後檐設有兩抹頭方格檻窗，中配方格風窗，前檐是牆。坤寧門東西兩側的山牆斜出八字琉璃影壁，兩側接坤寧宮的東、西廡房。坤寧門是後三宮通向御花園的門。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 739, 
                y: 152, 
                width: 42, 
                height: 13, 
                text: "欽安殿", 
                description: "欽安殿位於故宮御花園的正中偏北，建於明朝永樂十八年（1420年），並於嘉靖十四年（1535年）增建牆垣。殿內主要供奉玄天上帝。清朝乾隆時期，欽安殿進行了多次修繕，並在2005年恢復了乾隆年間的原貌。殿內設有五彩龍架大鐘與五彩鳳架大鼓等珍貴文物，並供奉玄天上帝的雕像。正北側有三個大龕，其中正龕的玄天上帝像為明朝永樂年間製作。此外，還有六尊「六從」神像，與五供香案一同擺放在殿內中央。欽安殿的前院有月台，四周圍繞著漢白玉欄杆，並設有天一門。每年元旦和重要節日，皇帝會在此設斗壇、拈香行禮，並設道場進行儀式。欽安殿自清代以來，成為皇家宗教儀式的重要場所。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 639, 
                y: 120, 
                width: 241, 
                height: 123, 
                text: "御花園", 
                description: "御花園，位於紫禁城中軸線上，是一座微型的皇宮後廷花園。這裡設有花石小徑、假山、池塘、古林。御花園設在皇宮中路的末端，很有意味。領略了皇宮中路一座座高大巍峨的宮殿莊嚴肅穆的感覺之後，來到御花園，會體會皇宮溫和婉約的一面。御花園原來是皇帝及后妃憩賞的園林，也兼具頤養、祭祀、讀書、藏書等功能。御花園的主體建築欽安殿是重簷盝頂式建築，處在紫禁城中軸線上，以欽安殿為中心，向南側東、西兩側佈置亭台樓閣。禦花園內的竹、柏、松之間點綴山石，形成了四季長青的景觀。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 744, 
                y: 100, 
                width: 38, 
                height: 15, 
                text: "順貞門", 
                description: "順貞門位於紫禁城內廷中路的北端，是通往御花園的北門。始建於明朝初年，原名「坤寧門」，於嘉靖十四年（1535年）更名為「順貞門」，當時坤寧門遷至坤寧宮後北圍廊正中。順貞門為隨牆琉璃門建築，共有三座，每座均安裝有雙扇大門，並嵌有九顆門釘。門外是北橫街，與神武門相對，內部南向對承光門，左右兩側設有延和門與集福門。這些門之間以琉璃頂矮牆相連，圍成小院。順貞門是內廷通往神武門的重要通道，皇后和皇帝有時會經此出入。特別在舉辦道場或選秀等場合，順貞門的開啟受到嚴格控制。明清兩朝，宮中重大儀式或人物往來常經此門，並保持良好的保存狀態。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 576, 
                y: 354, 
                width: 35, 
                height: 15, 
                text: "永壽宮", 
                description: "永壽宮，位於紫禁城內廷西六宮之一，為西六宮區的東南角建築。永壽宮建於明朝永樂十八年（1420年），初名「長樂宮」，歷經嘉靖十四年（1535年）更名為「毓德宮」，萬曆四十四年（1616年）改為「永壽宮」。其歷史可追溯至明清兩朝，曾為多位妃嬪及皇帝的重要活動場所，順治十二年（1655年）、康熙三十六年（1697年）、光緒二十三年（1897年）進行過多次修繕，基本保持了明代初期的格局。明代永壽宮曾是萬曆帝召見臣子的場所，崇禎帝也在此齋居。清代居住於永壽宮的妃嬪包括順治皇貴妃董鄂氏、康熙朝溫僖貴妃及乾隆朝的崇慶皇太后等，乾隆年間亦曾於此設宴為公主下嫁慶祝。光緒時期，永壽宮成為存放御用物件的大庫。建築方面，永壽宮為二進院落，主要建築包括正門永壽門、正殿永壽宮及東西配殿、後殿及院落中的井亭，正殿內懸掛乾隆帝御筆「令德淑儀」匾額，並曾於牆上陳設《班姬辭輦圖》。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 474, 
                y: 351, 
                width: 41, 
                height: 16, 
                text: "太極殿", 
                description: "太極殿位於紫禁城內廷西六宮西南角，建於明永樂十八年（1420年），初名「未央宮」，後因明嘉靖帝生父朱祐杬出生於此，更名為「啟祥宮」，清代改稱「太極殿」。該殿多次修葺，曾作為明神宗因火災暫居之所，清末慈禧太后亦曾居於此，並設置宮廷戲台演出。太極殿原為二進院，清代後期將後殿改為穿堂殿，並與長春宮相連，形成南北四進院，主要建築包括正殿太極殿、體元殿、東西配殿及清末添建的小戲台等。正殿採黃琉璃瓦歇山頂，內飾石膏堆塑天花，裝潢華麗，體元殿明間掛有「體元殿」匾，東西配殿分別名為「怡性軒」與「樂道堂」。如今，太極殿及體元殿內設有宮廷生活原狀陳列，展現清宮文化與生活特色。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 474, 
                y: 279, 
                width: 40, 
                height: 14, 
                text: "長春宮", 
                description: "長春宮，位於紫禁城內廷西六宮區域西部中間，是歷史悠久的建築之一。其始建於明朝永樂十八年（1420年），初名「長春宮」，後經嘉靖年間更名為「永寧宮」，明萬曆年間又恢復「長春宮」之名。清朝康熙二十二年重修，咸豐九年（1859年）進行改建，將啟祥宮後殿改為穿堂殿，名為「體元殿」，自此長春宮與啟祥宮連成一體。該建築具有南北四進院落的格局，前檐懸掛「長春宮」匾額，內部設有正殿、配殿、戲台等建築。長春宮歷史上曾為多位后妃居住，如明天啟年間的李成妃、清乾隆朝的孝賢皇后富察氏（死後停靈於此）、同治至光緒年間的慈禧太后，以及清宣統朝的隆裕太后等人。文獻記載中，清末遜帝溥儀的淑妃文繡亦曾居於此。長春宮內部裝飾精美，正殿「澂心正性」匾與各廂房的陳設顯示其奢華與功能性，並保存了許多清代宮廷文化的遺跡，如乾隆帝所題的匾額及紅樓夢題材的壁畫。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 576, 
                y: 280, 
                width: 41, 
                height: 12, 
                text: "翊坤宮", 
                description: "翊坤宮位於紫禁城內廷，建於明永樂十八年（1420年），最初稱為萬安宮，後來於嘉靖十四年改名為翊坤宮。它是明清時期皇帝妃嬪的居所，並且在清代多次進行修繕。翊坤宮的主要建築包括正殿，面闊五間，歇山頂上鋪設黃琉璃瓦，華麗的裝飾展現了皇室的奢華。正殿前懸掛著「翊坤宮」的匾額，宮內的陳設包括寶座、屏風及香几等，展示了清代妃嬪的生活。翊坤宮曾是許多妃嬪的住所，如康熙時期的宜妃郭絡羅氏、乾隆時期的繼皇后那拉氏等。乾隆年間，繼皇后因為失寵被囚禁於此，顯示翊坤宮在歷史上也有特殊的政治意義。光緒年間，慈禧太后也曾在此接受朝賀。今日的翊坤宮已經開放為宮廷生活的展示館，向遊客呈現清代妃嬪的日常生活與宮廷建築的精緻工藝。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 577, 
                y: 228, 
                width: 38, 
                height: 17, 
                text: "儲秀宮", 
                description: "儲秀宮是紫禁城內廷西六宮之一，位於宮殿區的東北角。建於明朝永樂十八年（1420年），最初名為「壽昌宮」，於明朝嘉靖十四年（1535年）更名為「儲秀宮」。清朝沿襲此名稱，並多次進行修葺，特別是在光緒十年（1884年），為慈禧太后五十壽辰進行了大規模整修。慈禧太后早年居住於儲秀宮後殿，並在此生下同治帝，後來隨著她的升遷，她將儲秀宮後殿定名為「麗景軒」，並興建了室內戲台。儲秀宮的建築風格典雅且具有多重意涵，尤其是其中的匾額與裝飾，大多為慈禧太后親自題寫或賜予，彰顯了宮殿的尊貴與特殊地位。如今，儲秀宮已經成為展示宮廷生活的博物館，並定期舉辦與溥儀相關的展覽，將其歷史與文化呈現給公眾。儲秀宮的建築結構包括正殿、東西配殿及多個裝飾精美的房間，每一處均能見到精緻的手工藝和象徵性匾額，反映了當時皇室的生活品味與宮廷的威嚴。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 477, 
                y: 225, 
                width: 32, 
                height: 15, 
                text: "咸福宮", 
                description: "咸福宮是紫禁城內廷西六宮之一，位於西北角，建於明永樂十八年（1420年），最初名為壽安宮，嘉靖十四年（1535年）改為現名。咸福宮曾是後宮妃嬪的住所，乾隆年間也曾作為皇帝偶爾起居之所。嘉慶四年（1799年），乾隆帝去世後，嘉慶帝曾在此守孝並主持政務。此後，咸福宮又成為後宮的住所，曾住過道光帝、咸豐帝及其母康慈皇貴太妃等人。咸豐帝時期，宮內設有同道堂，並多次以此為地方命名，特別是慈禧太后曾在此生下同治帝。咸福宮的建築風格包括琉璃瓦屋頂和傳統中式殿堂結構，正殿懸掛乾隆帝的親筆題字，並有許多貴重的文物和典籍保存其中。清朝結束後，咸福宮成為故宮博物院的一部分，並對外開放，成為展示清代宮廷生活的場所。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 525, 
                y: 150, 
                width: 50, 
                height: 40, 
                text: "崇敬殿", 
                description: "崇敬殿位於重華門內，是重華宮前院的正殿，原為乾隆帝擔任和碩寶親王時的居所，於乾隆五年（1740年）擴建而成。該殿面闊五間，進深三間，覆以黃琉璃瓦歇山頂，前檐中央新增抱廈三間，明間設有四扇古錢紋櫺花槅扇門，其他部分為檻窗。殿內明間及東、西次間合稱為樂善堂，中央懸掛乾隆帝在為親王時親筆題寫的匾額「樂善堂」，兩側楹聯則由乾隆帝撰寫、大臣張廷玉敬書，彰顯忠孝與天倫之道。殿內正中陳設寶座，後置三扇屏風，並有宮扇、香幾、太平有象、甪端等典雅陳設，這些物品為乾隆帝登基後御臨重華宮時所用。崇敬殿東暖閣位於東梢間，內供佛像，懸掛康熙帝題匾「意葉心香」，楹聯表現佛教禪意；西暖閣則在西梢間，同樣供奉佛像，掛有乾隆帝題匾「吉雲持地」，楹聯抒發禪意與滿語文化的結合。整體布局既具皇家氣派，又融入深厚的宗教意涵。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 584, 
                y: 118, 
                width: 42, 
                height: 30, 
                text: "漱芳齋", 
                description: "漱芳齋位於紫禁城內，原是乾西五所的頭所，建於明永樂十八年（1420年）。清乾隆帝即位後，將乾西五所中的二所改建為重華宮，並將頭所改建為漱芳齋，設置戲台，作為重華宮宴集演戲之用。乾隆年間，皇帝每年新正至西苑闡福寺拈香後，會到漱芳齋開筆書福；萬壽節、聖壽節、中元節及除夕等重要節日，皇帝也常陪同皇太后在後殿進膳、看戲，並賜宴王公大臣。道光、咸豐、同治年間，皇帝仍在此侍奉太后用膳。宣統退位後，同治帝的瑜妃、瑨妃曾居於漱芳齋芝蘭室，並於太妃誕辰時在此傳戲，直到1924年溥儀被迫離宮。如今漱芳齋保存完好，為故宮博物院的貴賓接待處。漱芳齋為工字形建築，前殿、後殿及東西配殿圍合成小院，院內遊廊相連。前殿面闊五間，進深三間，黃琉璃瓦歇山頂，內部東次室額題「靜憩軒」，為乾隆帝舊時讀書處。殿前設有戲台，為亭式建築，面闊三間，進深三間，覆黃琉璃瓦攢尖頂，台面約90平方米，是紫禁城中最大的單層戲台。後殿名為「金昭玉粹」，內有方形亭式小戲台，與東室相對，供宴戲演出之用。小戲台題額「風雅存」，兩側楹聯「自喜軒窗無俗韻，聊將山水寄清音」。整座漱芳齋曾是清代皇室宴飲和觀戲的重要場所。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 412, 
                y: 130, 
                width: 38, 
                height: 17, 
                text: "靜怡軒", 
                description: "位於存性門內正北，坐北朝南。復原設計方案為：「勾連搭三卷殿。面闊五間，進深三間，周圍廊，前後四檁，中間六檁卷棚頂，外檐重拱交麻葉斗拱，裝修步步緊，支摘窗，格扇門，瓦頂綠琉璃瓦黃卷邊，彩畫為金線方心式蘇畫。」",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 412, 
                y: 117, 
                width: 38, 
                height: 12, 
                text: "慧曜樓", 
                description: "位於靜怡軒正北，處在花園東部最北端，坐北朝南。復原設計方案為：「七開間硬山樓東邊耳殿一間，西邊過橋遊廊一間。面闊七間，進深一間，四檁卷棚頂，上層檐重拱交麻葉斗拱，上下檐裝修燈籠框支摘窗，格扇門，瓦頂黃琉璃瓦綠卷邊，彩畫為金線方心式蘇畫。」",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 330, 
                y: 117, 
                width: 47, 
                height: 14, 
                text: "敬勝齋", 
                description: "位於花園西部的西北角，坐北朝南。復原設計方案為：「九開間前出廊硬山脊。面闊九間，進深一間，前出廊，東五間為明廊，西四間為暗廊，六檁硬山頂，重拱交麻葉斗拱，裝修步步緊支摘窗，格扇門，瓦頂綠琉璃瓦黃卷邊，彩畫為金線方心式蘇畫。」敬勝齋以《畫太簇始和》為準，復原設計方案定為起脊做法。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 349, 
                y: 140, 
                width: 37, 
                height: 27, 
                text: "延春閣", 
                description: "位於花園西部正中央，坐北朝南。復原設計方案為：「重檐四角攢尖周圍廊。面闊五間，進深五間，周圍廊，兩層樓閣，中間設暗層，下檐五踩重昂斗拱，平座重拱，偷心造斗拱，上檐擎檐柱下設雕刻花板，內檐柱設重拱交麻葉斗拱，裝修上下檐為步步緊支摘窗，格扇門，瓦頂黃琉璃瓦藍卷邊，圓琉璃寶頂，彩畫為金線方心式蘇畫。」",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 350, 
                y: 172, 
                width: 60, 
                height: 30, 
                text: "建福宮花園", 
                description: "建福宮花園位於紫禁城內西北隅，因隨建福宮而建而得名，亦稱「西花園」。建於清乾隆七年（1742年），占地約4,020平方米，園內有十多座形式各異的建築，布局靈活。乾隆帝十分喜愛此花園，為其作詩賦並收藏珍寶，嘉慶年間這些珍寶被封存，此後成為皇家珍藏之所。1923年6月26日，建福宮花園因火災焚毀，包括靜怡軒、延春閣、敬勝齋等建築以及大量珍寶悉數化為灰燼。據報導，火災起於敬勝齋，太監們雖然最先嘗試救火，但未能有效控制火勢。溥儀在自傳中提到，搶救出的燒熔金屬超過一萬七千兩，而眾多字畫、瓷器、佛像等珍藏無法估量損失。火災發生後，義大利使館的消防員提供協助，但由於紫禁城內缺乏自來水及消防設施，撲救困難重重。溥儀認為火災與太監盜竊珍寶有關，但也有說法指火災源於電燈房。1990年代初，香港商人陳啟宗倡議復建建福宮花園，成立香港中國文物保護基金會，並於1999年獲得國務院批准展開復建工程。該工程於2000年啟動，2005年完工，建福宮花園重新恢復昔日風貌，成為故宮博物院內重要的歷史文化景點之一。復建過程以清代文獻為依據，力求忠於原貌，並使用現代技術保證建築安全與耐久性，為中國文化遺產保護樹立了範例。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 362, 
                y: 212, 
                width: 40, 
                height: 14, 
                text: "中正殿", 
                description: "中正殿（滿語：ᠵᡠᠩᠵᡝᠩᡩᡳᠶᠠᠨ，穆麟德轉寫：jung jeng diyan）位於紫禁城內廷外西路春華門內，是一座具有深厚歷史與宗教意涵的道教建築。該建築始建於明永樂十八年，原名欽安殿，隨後幾經更名，至崇禎朝定名為中正殿。明仁宗曾於此崩逝。清代，中正殿成為藏傳佛教活動的重要場所，康熙三十六年設立了「中正殿念經處」，負責宮廷藏傳佛教事務，並定期舉行佛事活動。1923年，建福宮花園火災波及中正殿所在院落，導致中正殿及多座建築焚毀，僅餘石台明遺跡。2005年，故宮博物院與香港中國文物保護基金會合作展開復建工程，遵循「維持現狀、恢復原狀」的原則，參照史料及照片復建中正殿、淡遠樓等建築。2012年11月27日，中正殿區復建完工並舉行竣工典禮，復建後的中正殿成為故宮博物院藏傳佛教文物研究中心，展出佛像、唐卡等珍貴文物，包括康熙帝為母親祝壽製造的四壁觀音菩薩坐像及乾隆帝紀念六世班禪所繪的肖像唐卡。同日，故宮博物院院長單霽翔宣布，未來將逐步開放故宮西路，預計2015年正式向公眾開放。作為清代宮廷宗教文化的象徵，中正殿的復建不僅延續了歷史文脈，也為故宮博物院的文物研究與展示提供了新的契機。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 363, 
                y: 275, 
                width: 36, 
                height: 13, 
                text: "寶華殿", 
                description: "寶華殿坐北朝南，面闊三間，進深一間，黃琉璃瓦歇山頂，後檐明間接有抱廈一間，和北面前檐出廈的中正殿相呼應，形成南北對稱。清朝，寶華殿的明間陳設四方銅鍍金大龕一座，龕內供奉金胎釋迦牟尼佛一尊。龕前的供案上供奉觀音菩薩及阿彌陀佛銅像。東次間、西次間沿牆的供案上陳設著佛像及供器。寶華殿內的日常佛事活動主要為喇嘛誦經、設供獻等等。清朝皇帝每年多次來寶華殿拈香引禮。寶華殿前是一個廣場式院落，院落中央的漢白玉須彌座上放置「大清乾隆乙巳年造」款三足寶鼎青銅大香爐一座，靠北的東西兩側各豎有漢白玉基座的幡杆一根。清朝，這個院落是宮內舉辦大型佛事活動的場地，例如一年舉行一次的「送歲」、「跳布扎」等等活動。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 330, 
                y: 508, 
                width: 61, 
                height: 22, 
                text: "慈寧宮", 
                description: "慈寧宮位於紫禁城內廷外西路，是明清兩代太皇太后及皇太后居所的重要建築。明朝嘉靖年間，明世宗為生母蔣太后興建慈寧宮，建成後一度成為太皇太后、皇太后及先朝嬪妃的住所。明朝時期，慈寧宮經歷數次修繕，萬曆年間更因火災重建正殿。至清朝，慈寧宮作為皇太后的正宮繼續沿用，並多次翻修。乾隆年間，慈寧宮經過大規模改建，正殿由單檐廡殿頂改為重檐廡殿頂，後殿向北移動，形成如今的格局。清初，昭聖太皇太后（孝莊文皇后）居於此宮，但其後因太后地位尊崇，後繼皇太后多不敢入居，慈寧宮逐漸成為舉辦典禮與供奉佛像的場所。清代重大慶典如太后壽辰及節慶朝賀均在此舉行，慈寧宮亦為太后薨逝後治喪之地。民國後，慈寧宮改為故宮博物院的一部分，經歷多次修繕與用途調整，部分建築被用作修復廠或文保科技部。文革期間，大佛堂內佛像被運至洛陽白馬寺以充當文物陳列，顯示當時歷史文物的命運起伏。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 340, 
                y: 568, 
                width: 41, 
                height: 24, 
                text: "慈寧門", 
                description: "慈寧門：位於廣場北側，是慈寧宮的正門。[2]慈寧門始建於明朝，清朝乾隆年間改建慈寧宮時一併拆建。慈寧門為殿宇式大門，面闊五間，進深三間，黃琉璃瓦歇山頂，下有漢白玉須彌座，四周環繞石雕望柱、欄板。慈寧門前出三階，中央設有龍鳳御路石，階前左右各陳設銅鎏金瑞獸一座。慈寧門內有高台甬道通向正殿慈寧宮的月台。慈寧門的門扉設於明間、次間後檐金柱之間，各開朱漆大門兩扇。梢間後檐金柱之間為磚牆，前檐檐柱間各安有雙交四椀菱花槅扇檻窗四扇，檐下施單翹單昂五踩斗栱，梁枋繪有金琢墨石碾玉旋子彩畫，天花採用瀝粉貼金龍鳳圖案。慈寧門的門額為滿文、蒙古文、漢文三種文字的「慈寧門」，其中漢文採用篆體。慈寧門兩側接有黃琉璃瓦頂八字琉璃影壁，壁心的琉璃盒子以及岔角為菊、蘭、牡丹等花卉圖案。影壁後面有轉角廡房與慈寧門的兩山相連接。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 335, 
                y: 464, 
                width: 53, 
                height: 12, 
                text: "大佛堂", 
                description: "大佛堂是慈寧宮的後殿，為清朝太后、太妃禮佛之所，可能由於是紫禁城各個佛堂中體量最大者，故俗稱「大佛堂」。大佛堂面闊七間，進深三間，黃琉璃瓦歇山頂。大佛堂前的月台上陳設有香爐、香筒。大佛堂內裝修十分講究，供案、佛龕、佛像、佛塔、佛經、法物、供器等陳設非常多。其中傳為元朝乾漆夾紵三世佛與十八羅漢像都是傳世塑像中的珍品。大佛堂內原來懸掛清朝康熙帝「萬壽無疆」御書匾、乾隆帝「百八牟尼現莊嚴寶相，三千薝蔔聞清淨妙音」、「人天功德三摩地，龍象威神兩足尊」御書聯兩副。大佛堂的東廡也是佛堂，其內原來懸掛康熙帝「四星客華」御書額。清朝在大佛堂設首領太監、副首領太監、太監共39名（其內充喇嘛者過半），負責大佛堂的日常灑掃、念經、上香等等事宜。如今大佛堂建築保存完好，內部的佛像、龕案等陳設於文化大革命時期借往洛陽白馬寺大雄寶殿內供奉。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 308, 
                y: 413, 
                width: 109, 
                height: 40, 
                text: "壽三宮", 
                description: "壽三宮位於大佛堂以北。是三座規制完全一樣的三合院，分別位於西、中、東。其中，中宮殿處在慈寧宮的中軸線上。壽三宮前和大佛堂之間有一條甬道，甬道東西兩端各有一門，其中的東門正對東側的慈祥門。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 208, 
                y: 432, 
                width: 84, 
                height: 99, 
                text: "壽康宮", 
                description: "壽康宮位於紫禁城內廷外西路，毗鄰慈寧宮，是清朝太皇太后及皇太后居所，太妃與太嬪隨居於此，皇帝每隔數日便至此問安。壽康宮建於雍正十三年（1735年），乾隆元年（1736年）竣工，並於嘉慶二十五年（1820年）及光緒十六年（1890年）進行重修。乾隆朝崇慶皇太后、嘉慶朝穎貴太妃及咸豐朝康慈皇太后均曾居於此。崇慶皇太后逝世後，乾隆帝仍每年於節日前往壽康宮祭拜，以示敬仰。該建築群共有三進院落，主要由壽康門、壽康宮正殿、東西配殿、寢殿及後罩房組成。壽康門為琉璃門，正殿坐北朝南，殿內懸掛乾隆帝御書「慈壽凝禧」匾額，東暖閣為皇太后日常禮佛之處。2013年，壽康宮及周邊建築完成修繕，2015年故宮博物院建院90周年時對外開放，正殿及寢殿按照清宮原有陳設布置，展示崇慶皇太后生活場景。壽康宮正殿曾於1950年代作為青銅器館使用，2014年，為確保建築安全，故宮博物院拆除了壽康宮外的彩鋼房，並推進「平安故宮」計畫，重現宮廷原貌，讓遊客一覽壽康宮的歷史與文化價值。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 268, 
                y: 637, 
                width: 40, 
                height: 16, 
                text: "咸若館", 
                description: "咸若館位於慈寧宮花園北部中央，為花園的主體建築，是清朝太后、太妃的禮佛場所。明朝初建時，稱「咸若亭」，萬曆十一年（1583年）更名「咸若館」。清朝乾隆年間先後經過大修、改建，形成如今的形制。咸若館坐北朝南，正殿面闊五間，前出抱廈三間，四周出圍廊。正殿是黃琉璃瓦歇山式頂，抱廈是黃琉璃瓦卷棚式頂。咸若館前有一座花壇。咸若館內裝飾極為考究，梁檁上有龍鳳和璽彩畫，頂部有海墁花卉天花。室內明間柱子的裝飾帶有藏式佛殿特點。室內還有貫通東、北、西三面牆的通連式金漆毗廬帽梯級大佛龕。咸若館內懸掛著清朝乾隆帝御書「壽國香台」匾、「證最勝因金界莊嚴歡喜地，贊無量壽寶輪擁護吉祥雲」對聯，並且陳設著佛龕、條案、佛像、法器、供物等等。咸若館東、北、西三面，分別為寶相樓、慈蔭樓、吉雲樓，三座樓的形制接近，均為兩層，綠琉璃瓦黃剪邊卷棚歇山頂，呈「┌┐」形環抱著咸若館。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 270, 
                y: 619, 
                width: 40, 
                height: 15, 
                text: "慈蔭樓", 
                description: "位於咸若館後正北，是清宮內的藏經樓，始建於清朝乾隆三十年（1765年）。慈蔭樓坐北朝南，上下兩層，面闊五間，綠琉璃瓦黃剪邊卷棚歇山頂。下層東梢間是過道，前後設有門，可通往慈寧宮前廣場，西牆開門通往室內。上層明間開門，次間、梢間安有檻窗，西梢間設有樓梯。北壁設有通壁的供經龕，曾經供放北京版藏文大藏經《甘珠爾》108部。正中為佛龕，供奉釋迦牟尼佛等金銅佛像數尊。佛龕前有長條供案，案上陳設著佛塔、供器。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 245, 
                y: 674, 
                width: 91, 
                height: 30, 
                text: "慈寧宮花園", 
                description: "慈寧宮花園位於紫禁城內廷外西路慈寧宮西南，是明清時期太皇太后、皇太后及太妃、太嬪們遊憩與禮佛之地。其始建於明朝，萬曆年間曾更名臨溪亭與咸若館，清乾隆三十四年進行大規模改建，雖經多次更動但整體規模與布局基本未變。花園布局規整，左右對稱，主次分明，主要依靠水池、山石與花木營造園林氛圍。園內多松柏，間植梧桐、玉蘭、銀杏與丁香，花壇內密植牡丹與芍藥，四季景色各具特色。花園南北長約130米，東西寬50米，總占地面積6800平方米，建築集中於北部，南部則地勢平坦、花木繁茂。中軸線自南向北依次為南入口、假山、南花壇、臨溪亭、北花壇、咸若館與慈蔭樓。2013年完成修繕，並於2015年故宮博物院建院90周年時正式對外開放。咸若館依佛堂原規制陳列佛像與法器，成為故宮首個對外開放的佛堂。同年，故宮研究院考古研究所對慈寧宮花園熱力電力管線改造工程中的明代建築遺址進行搶救性發掘，揭露多層歷史遺跡，並將考古現場開放於慈寧宮花園外東側甬道，向遊客展示紫禁城的歷史文化價值。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 243, 
                y: 323, 
                width: 41, 
                height: 20, 
                text: "春禧殿", 
                description: "為第一進院正殿。舊建築被毀時間不詳，現有建築為1989年重建。春禧殿坐北朝南，面闊五間，黃琉璃瓦單檐歇山頂，明間開門，其他為檻窗。春禧殿左右辟有穿堂門，通往第二進院。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 244, 
                y: 130, 
                width: 42, 
                height: 15, 
                text: "英華殿", 
                description: "英華殿位於紫禁城內廷外西路西北，是明朝、清朝皇太后、太妃、太嬪禮佛之地。英華殿始建於明朝，初名「隆禧殿」，明隆慶元年（1567年）更名「英華殿」，清乾隆三十六年（1771年）重修。明朝時，每年萬壽節、元旦在此舉行佛事，並於夏曆四月初八「浴佛日」供奉糕點後分賜百官。慈聖皇太后薨後，萬曆帝奉御容於殿內。清代皇太后、皇后以英華殿為禮佛之所，並供奉滿族薩滿教神「完立媽媽」。咸豐二年（1852年），咸豐帝親至拈香禮拜。2008年報導稱故宮博物院於2009年起陸續修繕英華殿等建築。清理過程中，發現溥儀時期的家具及清代珍稀絲織品「紅色灑金方孔紗」。1970至80年代間，發現外西路英華殿到慈寧宮花園西宮牆的券洞哨所，1990年代修復時保留券洞痕跡。英華殿坐北朝南，面闊五間，黃琉璃瓦單檐廡殿頂，設有七座佛龕供奉西番佛像。殿前有月台與甬路相連，甬路旁各植菩提樹，為萬曆帝生母慈聖皇太后所種。殿左右耳殿三間，均為黃琉璃瓦硬山頂，結構與主殿一致。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 251, 
                y: 224, 
                width: 31, 
                height: 15, 
                text: "山門", 
                description: "南院中部辟有山門，山門後面為一個較寬敞的庭院。山門前有一廣場，廣場東西兩端開門，西門通往英華殿西跨院，東門通往英華殿院落東側的西筒子路。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 904, 
                y: 446,
                width: 39, 
                height: 16, 
                text: "齋宮", 
                description: "齋宮位於紫禁城東六宮以南、毓慶宮西側，是清代皇帝祭天祀地前進行齋戒的重要場所。明朝及清朝前期，皇帝祭天祀地前的齋戒儀式通常在宮外舉行。雍正九年（1731年），雍正帝因宮內鬥爭激烈，為求安全改於紫禁城內建齋宮，從此將齋戒儀式改至宮中舉行。齋戒期間，皇帝及陪祀大臣需佩戴齋戒牌，遵守齋戒規範，包括不飲酒、不作樂及忌食辛辣。2011年5月8日，齋宮內臨時展覽《交融——兩依藏珍選粹展》發生失竊案，展出的20世紀現代工藝品9件失竊。嫌疑人石柏魁於當日潛入齋宮，破壞安防系統及展櫃，盜取展品後將部分藏品遺棄於故宮及北京市內。北京市公安局迅速破案，追回其中6件，均有不同程度損壞。2012年，北京市第二中級人民法院判處石柏魁有期徒刑13年，並處罰金1.3萬元。案件後，齋宮暫時關閉進行整改，並於2012年3月重新開放繼續展出上述展覽。這起案件成為故宮安防史上的重要事件之一，促使故宮博物院進一步加強安保措施。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 904, 
                y: 416, 
                width: 39, 
                height: 15, 
                text: "誠肅殿", 
                description: "為齋宮的後寢宮，初名「孚顒殿」，後來更名「誠肅殿」。面闊七間，黃琉璃瓦歇山頂。該殿東西耳房各兩間。東西各設遊廊11間，和前殿相連接。誠肅殿明間北側上方掛「莊敬日強」匾，兩側對聯為：「慎獨謹幾，旦明懷帝載；思艱圖易，宵旰念民依。」",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 979, 
                y: 437, 
                width: 37, 
                height: 23, 
                text: "毓慶宮", 
                description: "毓慶宮位於紫禁城內廷東路奉先殿與齋宮之間，為清朝皇子居所及皇帝讀書處。毓慶宮始建於康熙十八年（1679年），建於明朝奉慈殿基址上。雍正九年，毓慶宮被改建為齋宮，乾隆八年又於齋宮東側重建，歷經乾隆、嘉慶、光緒年間多次修繕與擴建。毓慶宮內部建築由長方形院落組成，共有四進院落，包括前星門、惇本殿及後罩房等建築群。其中正殿毓慶宮平面呈「工」字形，內部分隔成數間小室，構思精巧，因而有「小迷宮」之稱。毓慶宮曾作為皇子如乾隆帝與嘉慶帝的居所，也曾是同治、光緒皇帝的讀書處。毓慶宮內部裝修考究，後殿懸掛「繼德堂」「味余書室」等匾額，並設有藏書室「宛委別藏」及「知不足齋」，充分展現其文化氛圍與宮廷特色。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 979, 
                y: 482, 
                width: 37, 
                height: 18, 
                text: "惇本殿", 
                description: "祥旭門內為毓慶宮的第二進院落，正殿惇本殿，東西配殿各三間。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1050, 
                y: 452, 
                width: 56, 
                height: 16, 
                text: "奉先殿", 
                description: "奉先殿，位於北京故宮內廷東側，是明清皇室祭祀祖先的家廟，2004年成為故宮博物院鐘錶館。奉先殿建於明洪武初年，由明太祖建造以表現孝思，永樂年間遷都北京後，明成祖沿用舊制在大內以東建設現址。清朝沿襲明制，於順治十四年重建並多次修繕，清代禮制規定大祭在奉先殿前殿舉行，小祭則於後殿進行。文化大革命期間，奉先殿曾被用作展覽場地，建築結構遭部分改動，1966年清朝祭祖所用焚帛爐被拆除。改革開放後，奉先殿重新作為展覽場所，2004年修復工字形結構後成為鐘錶館，展出故宮收藏的清宮鐘錶及其他珍品。奉先殿為「工」字形建築，建於須彌座上，四周圍以高牆，正殿（前殿）面闊九間，進深四間，頂為黃色琉璃瓦重檐廡殿頂，內設列聖列後神寶座、籩豆案等祭祀設施；寢殿（後殿）面闊九間，進深兩間，與正殿以穿堂相連，內部分為九室供奉神牌。正殿與寢殿均鋪金磚，檐下彩繪有金線旋子彩畫，前殿前的月台設有日晷和嘉量，四周設龍鳳紋欄板及望柱，殿前無配殿，僅有群房13間作為神庫、神廚使用。奉先殿東側的小院內原有崇先殿，為明世宗肅皇帝為其父興獻王所建，後祭祀功能被奉先殿取代。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 900, 
                y: 363, 
                width: 45, 
                height: 13, 
                text: "景仁宮", 
                description: "景仁宮，為紫禁城內廷東六宮之一，位於東六宮區的西南角。景仁宮於明朝永樂十八年（1420年）建成，初名「長安宮」，明嘉靖十四年（1535年）更名為「景仁宮」。清朝沿襲此名，並在順治十二年（1655年）重修，後歷經道光十五年（1835年）與光緒十六年（1890年）修繕。景仁宮自明朝以來為妃嬪居所，清朝時康熙帝生於此，乾隆帝的生母孝聖憲皇后、光緒帝珍妃等亦曾居住其中。珍妃於光緒二十六年（1900年）被慈禧太后下令投入井中溺斃，景仁宮遂被認為是不祥之地，並設置鎮邪之物。2005年，景仁宮經修繕後對外開放，成為故宮博物院捐獻館，展出捐贈文物，並設有刻有捐贈者名錄的「景仁榜」。2006年，畫家吳冠中的三幅作品被捐贈至故宮博物院，並登上景仁榜。景仁宮為二進院，正門為景仁門，宮內主要建築包括正殿、東西配殿、後殿及井亭，正殿設有乾隆帝御題「贊德宮闈」匾，殿內天花繪有二龍戲珠圖案。景仁宮在清朝時曾居住多位皇室成員與妃嬪，其中康熙帝生母孝康章皇后佟佳氏於此生下康熙帝，而康熙帝亦曾因兄長福全之喪期在此居住悼念。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 900, 
                y: 300, 
                width: 39, 
                height: 12, 
                text: "承乾宮", 
                description: "承乾宮，位於紫禁城內廷東六宮之一，是明清時期后妃的居所之一，建於明永樂十八年（1420年），原名「永寧宮」，崇禎五年（1632年）改為「承乾宮」。清朝順治十二年（1655年）重修，乾隆帝為承乾宮題寫匾額，並御撰《宮訓詩》，每年春節期間張掛於宮內。承乾宮內主要建築包括前殿、貞順齋、明德堂、後殿及井亭，整體保持明朝原始格局。歷史上，承乾宮多由寵妃及地位尊貴的妃嬪居住，如順治帝的皇貴妃董鄂氏、乾隆帝的舒妃和豫妃、道光帝的琳貴妃等。民國時期，承乾宮被改為故宮博物院青銅器館，1958年首次開展，展出多件商周青銅重器及戰國文物，成為博物館三大專館之一。2010年館內因改陳施工閉館，2013年重新開放後展出包括「青銅器與禮制」、「青銅器與軍事」、「青銅器與音樂」等主題，並新增介紹臺北故宮及海外青銅器藏品的專題。承乾宮的青銅器館展覽一直是故宮博物院的重要文物陳列支柱，吸引無數遊客參觀。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 904, 
                y: 253, 
                width: 34, 
                height: 15, 
                text: "鍾粹宮", 
                description: "鍾粹宮是故宮博物院的一部分，位於紫禁城東六宮的西北角，建於明朝永樂十八年（1402年），最初名為“咸陽宮”，後來於明朝嘉靖十四年（1535年）改為“鍾粹宮”。該宮殿是妃嬪居住的地方，也曾作為皇太子的宮殿。在清朝時期，鍾粹宮的歷史具有特殊意義，咸豐帝奕詝幼年時便在此宮與孝全成皇后共同生活，後來宣統帝的母親隆裕皇后也曾在此居住，直到她成為太后後才遷往其他宮殿。宮殿的正殿前檐掛有“鍾粹宮”匾額，該匾額由乾隆帝於乾隆六年（1741年）命人製作，並親自題寫，並要求匾額不得輕易移動，無論妃嬪是否更換宮殿，匾額都應保持不變。如今，鍾粹宮作為故宮博物院的重要展示場所，主要展示珍貴的玉器收藏。2013年，該宮曾舉辦“盛世琳琅——故宮博物院藏乾隆朝玉器精品展”，展示了清朝乾隆時期的玉器藝術，成為研究清宮歷史和藝術的重要場所之一。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1001, 
                y: 363, 
                width: 33, 
                height: 15, 
                text: "延禧宮", 
                description: "延禧宮是紫禁城內廷東六宮之一，位於東六宮區的東南角，最初建於明朝永樂十八年（1420年），當時名為「長壽宮」，後於明朝嘉靖十四年更名為「延祺宮」，清朝時又更名為「延禧宮」，並於康熙二十五年進行重修。延禧宮作為妃嬪的居所，在明清兩代都有使用，並且經歷多次火災。道光帝在位期間，延禧宮多次發生火災，並在火災後進行過重建。道光十二年（1832年）發生的火災使得延禧宮幾乎被完全摧毀，後來又進行了修復。宣統時期，延禧宮的正殿原址興建了「水殿」，這是一座西洋式建築，外形獨特，但最終未完成，並於1911年停建。延禧宮的建築格局以東六宮的典型形式為主，包括正殿及東西配殿，並有過多次的修繕。隨著清朝滅亡，延禧宮的功能逐漸改變。1917年，延禧宮北部曾遭到炸彈襲擊。後來，在1920年代末，延禧宮改為文物庫房。2005年，延禧宮重新開放，成為故宮博物院的研究中心。此後，延禧宮作為古書畫、古陶瓷等文化遺產的展示場所，舉辦過多次展覽，吸引了大量遊客和研究者的關注，尤其是在2018年，隨著電視劇《延禧攻略》和《如懿傳》的熱播，延禧宮成為故宮的熱門景點。如今的延禧宮除了作為展示場所，還設有古書畫和古陶瓷的研究及檢測中心。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 993, 
                y: 313, 
                width: 45, 
                height: 17, 
                text: "永和宮", 
                description: "永和宮是位於北京紫禁城內廷東六宮之一，建於明朝永樂十八年（1420年），最初名為「永安宮」，後於明朝嘉靖十四年（1535年）更名為「永和宮」。清朝時期，永和宮成為后妃的居所，且在康熙、乾隆、光緒等時期多次進行修繕。這裡曾是孝恭仁皇后、靜貴妃、麗貴人、瑾妃等歷代妃嬪的住所。建築風格上，永和宮為二進院，保存了明朝的建築格局，主體建築包括正殿、東西配殿以及後院的同順齋。永和宮內的裝飾十分華麗，正殿懸掛有乾隆帝御題匾額，並且有許多精緻的雕刻和彩畫。作為故宮博物院的一部分，永和宮自2005年起開放，作為「清代妃嬪生活展」的展示場地，展出與清代后妃生活相關的文物。經過多次修整後，這一展覽成為故宮博物院的重要常設展覽之一。此外，永和宮還擁有青銅器館，展示著來自中國及海外的青銅器珍品，這些青銅器來自各個歷史時期，反映了當時的禮制、軍事、音樂和生活等方面。永和宮的建築、歷史和展覽內容，對於了解清朝宮廷生活和文化具有重要意義。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 998, 
                y: 251, 
                width: 38, 
                height: 22, 
                text: "景陽宮", 
                description: "景陽宮位於紫禁城內廷東六宮的東北角，建於明永樂十八年（1420年），最初名為長陽宮，後於嘉靖十四年（1535年）改為景陽宮。景陽宮原為明朝妃嬪的居所，清朝則將其改為圖書收藏地。康熙二十五年（1686年）進行了重修。景陽宮的名稱「景陽」象徵「景仰光明」，與周易中的東北艮位相應，意味著光明與智慧。景陽宮的建築保持著明初格局，擁有二進院的結構，主要建築包括景陽門、正殿、東西配殿等。正殿為黃琉璃瓦屋頂，內部裝飾精緻，掛有乾隆帝親書的匾額與對聯。1987年，景陽宮遭雷擊引發火災，部分建築受損，後來進行重修並安裝了避雷針。在歷史上，景陽宮也與明朝恭妃王氏有著密切的關聯。王氏本為明神宗母親慈聖皇太后的宮女，在某次偶然的機會中被神宗寵幸，懷孕後誕下明光宗朱常洛。然而，王氏並未受到太多寵愛，即因為「國本之爭」住進景陽宮，形同冷宮。王恭妃在景陽宮中度過孤寂的日子，最後因為過度悲傷與長期眼疾，雙眼漸漸失明。萬曆三十九年，當她病危時，皇太子朱常洛被允許前往探望她。母子相見的時刻，王恭妃只能拉著朱常洛的衣角，哭泣道「兒長大如此，我死何恨」，她不久後便去世。然而朱常洛登基僅一個月就因為「紅丸案」暴斃，後由明熹宗追封為「孝靖溫懿敬讓貞慈參天胤聖皇太后」。王恭妃的悲劇故事在景陽宮的歷史中留下了深刻的印記。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 884, 
                y: 118, 
                width: 240, 
                height: 83, 
                text: "北五所", 
                description: "乾東五所，又稱「北五所」，位於紫禁城內廷東路、千嬰門以北，西鄰御花園。此地始建於明朝初期，與西路的乾西五所對稱，形成紫禁城的布局特色，展現了陰陽五行的理論。乾東五所原為皇子居所，並在乾隆年間進行過多次修繕和調整，尤其在乾隆三十年後，部分建築如如意館、壽藥房等改為其他用途。乾東五所的五組建築自西向東依次為頭所、二所、三所、四所和五所，設有南北三進院落及配套建築，建築風格獨特，每所之間用矮牆隔開，形成相對獨立的空間。乾隆三十九年（1774年），乾東五所再次進行了重修，並對頭所、二所進行了裝修，以供皇十五子（後來的嘉慶帝）成婚後居住。雖然隨著時間推移，乾東五所逐漸轉變為儲物、辦公等用途，但仍保留了不少清代遺跡，如慈禧太后的御題匾額等。三所內的設施，包括珍貴的文物和古建修繕，也曾發生過文物遺失事件，後經修復得到保護。乾東五所作為清朝皇室的生活空間，見證了宮廷文化的變遷與發展，至今仍是研究紫禁城歷史與建築的重要場所。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1242, 
                y: 491, 
                width: 46, 
                height: 12, 
                text: "寧壽門", 
                description: "位於皇極門正北，為寧壽宮區的第二道宮門。清朝康熙二十八年（1689年），創建寧壽宮，興建此門，稱「寧壽門」。乾隆三十六年（1771年）至乾隆四十一年（1776年）改建寧壽宮時，將門制依照乾清門之制改建，門名仍沿襲舊稱「寧壽門」。寧壽門是屋宇式建築，黃琉璃瓦歇山頂，面闊五間，進深三間。前檐正中三間為敞廳，兩梢間下砌檻牆，上面設有三交六椀菱花檻窗各四扇，中間安有方格風窗。兩側的山牆連接八字影壁。後檐以金柱為界，明間以及左、右次間設門，兩梢間用牆封堵，牆是素面飾砂綠邊。寧壽門建在漢白玉台基上，中間設丹陛，三出階，左右各設有鎏金銅獅一隻。門內設高台甬路連接皇極殿，四周飾有欄板。寧壽門早期建築的彩畫為金龍和璽彩畫，光緒年間慈禧太后六十壽辰時，改為枋心蘇式彩畫，1979年重修時，將彩畫恢復成乾隆時期的風貌。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x:1237, 
                y: 416, 
                width: 57, 
                height: 12, 
                text: "皇極殿", 
                description: "皇極殿是紫禁城寧壽宮區的主體建築，位於中軸線前部，與後殿寧壽宮共同置於單層石台基上。建築坐北朝南，面闊九間、進深五間，象徵帝王九五之尊。殿頂為黃琉璃瓦重檐廡殿頂，前檐出廊並有渾金雕龍雀替，殿內四根瀝粉貼金蟠龍柱支撐，頂部設有八角渾金蟠龍藻井，中央設寶座，其品級僅次於太和殿。皇極殿原作為寧壽宮的前殿，始建於康熙二十八年（1689年），在乾隆三十六年至四十一年改建時，改名為皇極殿，成為乾隆帝歸政後臨朝受賀之地。殿內設有大自鳴鐘和銅壺滴漏，並懸掛多幅匾額與對聯，包含光緒帝與慈禧太后的題詞。皇極殿前有青白石須彌座月台，與甬道相連，左右設台階，御道兩側曾有石座與六角亭，現僅存石座。乾隆年間改建使寧壽宮區形成以皇極殿為中心的「工」字形布局，後殿則稱寧壽宮，成為乾隆帝安置祭祀神位之所。此後，皇極殿歷經多次修葺，嘉慶元年舉辦「千叟宴」，光緒年間則多次作為慈禧太后接見外國使臣與祝壽的場所。殿內原有的寶座已於二十世紀中期調至瀋陽故宮，如今見到的是後期重新製作的仿品。這座建築不僅是清代紫禁城內重要的滿族薩滿教建築之一，也見證了清代歷史上多個重大事件。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1243, 
                y: 614, 
                width: 40, 
                height: 15, 
                text: "九龍壁", 
                description: "九龍壁位於紫禁城寧壽宮區的皇極門外，與山西大同九龍壁及北京北海公園九龍壁並稱「中國三大九龍壁」。此壁建於清乾隆三十七年（1772年），為單面琉璃影壁，長29.4米，高3.5米，厚0.45米。其上覆黃琉璃瓦廡殿頂，檐下有仿木結構的椽、檁與斗栱。壁面以雲水紋為底，運用藍色和綠色展現天水相接的氣勢，下部為漢白玉須彌座。九條龍以高浮雕方式雕刻，最凸處達20厘米。中央的黃色正龍居中，兩側對稱排列藍龍與白龍各兩條，左右兩端則有黃龍與紫龍，整體呈現動態之美。設計中融入「九五」數字象徵，寓意天子尊貴，正脊中央為坐龍，兩側各飾四條行龍，壁面由270塊塑塊拼接而成，體現高超的工藝技術。九龍壁不僅展現了清代建築裝飾藝術的精湛，更蘊含深厚的文化與象徵意義，成為紫禁城的重要特色之一。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1241, 
                y: 289, 
                width: 44, 
                height: 16, 
                text: "養性殿", 
                description: "養性殿位於養性門內，是寧壽宮後寢的主體建築之一，建於清乾隆三十七年（1772年），仿內廷養心殿而建，但規模略小。養性殿為黃琉璃瓦歇山頂建築，面闊三間，每間以方柱支撐，分隔為九間，前設卷棚抱廈四間。室內進深四間，空間被分隔為多間小室，明間設有寶座，屋頂為八角渾金蟠龍藻井，並配以片金升降龍天花。左右次間以板牆分隔，板牆上對稱設有門。東暖閣分為前後兩部分，前稱「明窗」，後稱「隨安室」，其中懸掛乾隆帝御筆「儼若思」匾額。西暖閣則分隔為數間小室，北室為佛堂，內有佛塔與佛像，南室稱為「長春書屋」。西端盡間仿養心殿三希堂，設「墨雲室」，因畢沅進古墨而得名。殿外西山牆有耳房，名為「香雪堂」，內用白石砌成山景，三面彩繪壁畫，北、西、東牆開有窗戶，可窺見寧壽宮花園。養性殿原作為太上皇寢宮，採用和璽彩畫，後在光緒年間改為蘇式彩畫，唯「墨雲室」仍保留原貌。慈禧太后曾在此東暖閣進膳，增添了此殿的歷史意義與人文價值。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1238, 
                y: 231, 
                width: 50, 
                height: 13, 
                text: "樂壽堂", 
                description: "樂壽堂位於養性殿正北，建於清乾隆三十七年（1772年），嘉慶七年（1802年）及光緒十七年（1891年）先後進行修葺與重修，其設計仿自長春園的淳化軒。乾隆帝以此為退位後的寢宮，題匾「座右圖書娛畫景」，因此又稱「寧壽宮讀書堂」。光緒年間，慈禧太后曾居於此，以西暖閣為寢室。樂壽堂面闊七間（36.15米），進深三間（23.20米），建築面積839平方米，採用單檐歇山頂黃琉璃瓦覆頂，高度達18.7米，建築結構為減柱造，內部明間及次間以閣道分隔為南、北兩廳，東西稍間部分為單層，其他為兩層結構，二層面積341平方米。室內裝飾華麗，採用楠木、紫檀木與花梨木，並嵌有琺瑯及玉石等珍貴飾件，與天花木雕設計相得益彰。堂內仙樓為乾隆時期建築裝修的代表作之一，北部大廳陳設「大禹治水圖玉山」，匾額「樂壽堂」懸於大廳北檐；仙樓二層正面朝南懸掛「與和氣游」匾，對聯「座右圖書娛畫景，庭前松竹藹春風」，更添書香雅意。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1245, 
                y: 154, 
                width: 38, 
                height: 17, 
                text: "景祺閣", 
                description: "景祺閣位於寧壽宮中路北端，是一座二層樓閣式建築，建於乾隆三十六年（1771年），後經嘉慶及光緒年間修繕。建築面闊七間，進深三間，黃琉璃瓦歇山頂。下層四面出廊，前檐明間開門通往頤和軒後檐，次間設檻窗。西次間內設有小戲台，東次間分隔為小室，東梢間設樓梯通往二層。二層有尋杖欄杆，前檐明間設步步錦槅扇門，裙板飾夔龍紋。檐下彩畫原為乾隆金龍和璽風格，後改為蘇式彩畫，現已復原。景祺閣東側有假山與雲竇洞，假山頂曾設「翠環亭」，與閣樓之間有漢白玉小橋相連。景祺閣後的小院曾幽禁光緒帝的珍妃，院西牆外即為珍妃井。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1316, 
                y: 141, 
                width: 39, 
                height: 28, 
                text: "景福宮", 
                description: "景福宮位於紫禁城內廷外東路的寧壽宮區東北部，是康熙帝為其母仁憲皇太后所建。景福宮始建於清朝康熙二十八年（1689年），是仁憲皇太后的居所。乾隆三十七年（1772年），景福宮仿照建福宮後面的靜怡軒進行重建，用作乾隆帝歸政後的宴憩場所。嘉慶七年（1802年）和光緒十七年（1891年）進行過重修。景福宮坐北朝南，建築呈正方形，面闊五間、進深五間，四周有圍廊。建築位於漢白玉須彌座台基之上，檐柱的柱礎雕有覆蓮花紋，屋頂覆綠琉璃瓦黃剪邊，採用三卷勾連搭歇山卷棚頂，檐下繪有蘇式彩畫。外檐下方懸掛乾隆帝御筆的「景福宮」匾額，室內明間懸掛「五福五代堂」匾額。景福宮內曾設置西洋儀器，並在西窗外仿靜怡軒種植梅樹，設氈棚以保護梅樹。景福宮前方的東、西兩側有遊廊，圍合成為半開敞的小庭院，庭內種植松柏。西側遊廊中設有垂花門，即「景福門」，門外有一個小院，院中有著名的山石「文峰」，並且銘刻著乾隆帝御製《文峰詩》。經過文峰，穿過兩重月亮門即可到達佛日樓。景福宮是寧壽宮區的主體建築，北面為梵華樓，西面則與寧壽宮中路的景祺閣相對，建築之間設有遊廊及虎皮石牆，與周圍的園林環境協調融合。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1165, 
                y: 293, 
                width: 50, 
                height: 13, 
                text: "古華軒", 
                description: "為第一進院落的主體建築。建於清朝乾隆三十七年（1772年）。古華軒是一座坐北朝南的敞軒，面闊三間帶迴廊，正面懸掛著乾隆帝御筆「古華軒」木匾。卷棚歇山頂，黃琉璃瓦綠剪邊。檐柱之間設有倒掛楣子和坐凳，金柱間有透空燈籠錦落地罩，以區分內外，內外空間形成了貫通之勢。古華軒明間內檐以及三間後檐懸掛著木雕龍匾四塊，明間北柱朝南掛對聯一副「明月清風無盡藏，長楸古栢是佳朋」，均為乾隆帝為古楸而題寫。古華軒前檐下種植有古楸樹一株，建古華軒時樹齡已逾百年，古華軒便因此古樹而得名。古華軒的裝修十分素雅，軒內的天花採用卷草花卉圖案的楠木貼雕。因為圖案凸起於天花板上，所以產生了強烈的立體感，獨具韻味。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1165, 
                y: 308, 
                width: 33, 
                height: 22, 
                text: "禊賞亭", 
                description: "位於第一進院落西側，建於清朝乾隆三十七年（1772年）。坐西朝東，位於須彌座平台上，面闊三間，進深三間，前出抱廈，平面呈「凸」字形，三面出歇山頂，中間是四角攢尖琉璃寶頂，黃琉璃瓦綠剪邊，檐下繪有蘇式彩畫。明間後面設有黑漆雲龍屏門，以遮擋亭後的高牆，北側有遊廊通往旭輝庭。禊賞亭抱廈內的地面鑿石成曲折狀的渠，渠長27米，取「曲水流觴」之意，稱為「流杯渠」。渠水源自禊賞亭南側假山後面隱蔽的水井，汲水進缸，經過假山內的暗渠流到流杯渠中。禊賞亭內外均繪有竹紋，代表王羲之蘭亭修禊時的「茂林修竹」。禊賞亭前砌有山石踏步，亭檐下面用刻著竹紋的漢白玉欄板圍護。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1165, 
                y: 248, 
                width: 64, 
                height: 24, 
                text: "遂初堂", 
                description: "位於寧壽宮花園的南北中軸線上，古華軒後面，是第二進院落的正房。建於清朝乾隆三十七年（1772年），嘉慶、光緒年間重修。遂初堂面闊五間，進深三間，坐北朝南，卷棚歇山頂，黃琉璃瓦綠剪邊，前後出廊。前廊下懸掛著乾隆帝御筆滿文與漢文「遂初堂」匾額。中間開門，其他各間開支摘窗。明間是過廳，穿過過廳可來到寧壽宮花園的第三進院落。遂初堂左右有轉角遊廊，和東、西配房前廊相連。遂初堂內匾額為「養素陶情」，東室內對聯為「屏山靜水皆真宰，蘿月松風合靜觀」。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1188, 
                y: 159, 
                width: 36, 
                height: 25, 
                text: "符望閣", 
                description: "是第四進院落的主體建築。建於清朝乾隆三十七年（1772年），嘉慶七年（1802年）修，光緒十七年（1891年）重修。符望閣形制仿建福宮花園的延春閣。平面呈方形，外觀為兩層，內部實為三層，四角攢尖頂。藍色琉璃瓦件飾檐、脊，其餘鋪𡧗黃色琉璃瓦。符望閣室內用不同類型的裝修分隔空間，在穿越各門之際，容易令人迷失方向，故俗稱「迷樓」。室內以金、玉、琺瑯等等鑲嵌裝飾，非常精美。乾隆年間，每年農曆臘月二十一日，乾隆帝在此賞飯給王公大臣。嘉慶帝曾登該閣，並作《詠符望閣》詩。符望閣是寧壽宮花園中最為高大的建築，從閣上可俯瞰紫禁城內外景色。符望閣中對聯為「澄懷觀物真超矣，得意忘言亦快哉」。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1175, 
                y: 122, 
                width: 37, 
                height: 13, 
                text: "倦勤齋", 
                description: "倦勤齋位於紫禁城寧壽宮花園的最北端，北倚宮牆，南臨符望閣，建於乾隆三十七年（1772年），仿建福宮花園的敬勝齋而建。倦勤齋坐北朝南，面闊九間，卷棚硬山頂，綠琉璃瓦黃剪邊，檐下繪有蘇式彩畫。東五間與符望閣相對，東西兩側遊廊相接，構成封閉院落，並形成東五間和西四間的格局。庭院內鋪設十字方磚甬路，並栽種古柏，西四間前有弧形院牆，牆中開八方門通向竹香館。東五間以明間開門，其餘各間為步步錦支摘窗，檐下懸掛「倦勤齋」匾額，內頂棚為團花紋天花，南側設有過道。東五間明間仙樓建於凹字形平面內，用紗櫥分隔成多間小室，裝飾精美，仙樓內的寶座後有「一貫惟誠主於敬，萬幾無曠本諸身」對聯。西四間頂棚繪有竹架藤蘿海漫天花，四周環繞竹籬，室內裱糊乾隆年間郎世寧和王幼學所繪的通景畫，畫作描繪了竹籬、樓閣、白鶴及花卉。西四間內建有竹亭，並設有仿竹籬笆，另建小戲台，供乾隆帝作為太上皇時觀看戲劇之用，戲台規模不大，面闊與進深不足4米，設有演出雜耍的平台，兩根柱子上懸掛對聯「著添南極應無算，喜在嘉生兆有年」。仙樓二層寶座後亦懸有對聯，為觀戲時專用，樓梯位於仙樓東側，自南向北而上，與西四間的門相對。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1236, 
                y: 964, 
                width: 36, 
                height: 15, 
                text: "三座門", 
                description: "三座門位於紫禁城東華門內，內金水河北側，原為三座隨牆門的總稱。隨牆門是皇家建築中常見的設計，通常設有門樓並以琉璃裝飾，既精美又華貴，紫禁城內如皇極門、順貞門等均屬此類。明朝時三座門被稱為「前星門」，清朝時因毓慶宮南門啟用並命名為「前星門」，原「前星門」遂改稱「三座門」。三座門以南為東西流向的內金水河，其上並排建有三座石拱橋，俗稱前星門前三座橋，橋呈南北向，橋北正對三座門。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1290, 
                y: 890, 
                width: 100, 
                height: 80, 
                text: "清史館", 
                description: "國史館是清朝負責修纂國史和研究的專門機構，其主要任務包括修纂國史、整理史料及採集史料。最初為非常設機構，分別於康熙二十九年（1690年）、雍正元年（1723年）和乾隆元年（1736年）設立。康熙時，國史館首次開設，位於武英殿東、西廊房，主要纂修太祖至世祖的「三朝國史」，為清朝開國功臣作傳。雍正年間再次開設，但因機制問題成效不佳。乾隆初年則完成了太祖至世宗的「五朝本紀」及十四志等重要史書，並於乾隆三十年（1765年）起成為常設機構。此後，清高宗確立了修史原則，並進一步完善列傳體例，國史館的修史體制趨於成熟，並延續至清朝滅亡。道光以後，國史館的修史活動持續進行，並負責編修《大清一統志》等大型史書。至民國成立後，北京政府於1914年設立清史館，延續清史的纂修工作，並沿用國史館原址，其建築位於東華門內，旁設書庫，曾於乾隆年間被稱為黃琉璃瓦房。清朝國史館的設置與發展，對中國史學的編纂體例及檔案管理有深遠影響。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1155, 
                y: 897, 
                width: 60, 
                height: 72, 
                text: "清史西館", 
                description: "國史館是清朝負責修纂國史和研究的專門機構，其主要任務包括修纂國史、整理史料及採集史料。最初為非常設機構，分別於康熙二十九年（1690年）、雍正元年（1723年）和乾隆元年（1736年）設立。康熙時，國史館首次開設，位於武英殿東、西廊房，主要纂修太祖至世祖的「三朝國史」，為清朝開國功臣作傳。雍正年間再次開設，但因機制問題成效不佳。乾隆初年則完成了太祖至世宗的「五朝本紀」及十四志等重要史書，並於乾隆三十年（1765年）起成為常設機構。此後，清高宗確立了修史原則，並進一步完善列傳體例，國史館的修史體制趨於成熟，並延續至清朝滅亡。道光以後，國史館的修史活動持續進行，並負責編修《大清一統志》等大型史書。至民國成立後，北京政府於1914年設立清史館，延續清史的纂修工作，並沿用國史館原址，其建築位於東華門內，旁設書庫，曾於乾隆年間被稱為黃琉璃瓦房。清朝國史館的設置與發展，對中國史學的編纂體例及檔案管理有深遠影響。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1164, 
                y: 330, 
                width: 67, 
                height: 30, 
                text: "寧壽宮花園", 
                description: "寧壽宮花園，又稱「乾隆花園」，位於寧壽宮後區西路，始建於清乾隆三十七年至四十一年（1772-1776年），作為乾隆帝歸政後的游賞之地。花園位於東西寬約40米、南北長160米的狹長區域，自南向北分為四進院落。第一進院以古華軒為主體，周邊有假山、禊賞亭、擷芳亭等景觀；第二進院以遂初堂為核心，配房和垂花門形成三合院，庭院內布置太湖石和花木；第三進院以假山和萃賞樓、延趣樓、三友軒等建築構成複雜的山水景觀；第四進院的主體是符望閣，周圍分布碧螺亭、倦勤齋、竹香館等建築，廊道相連，布局錯落有致。整個花園融合了私家園林的精巧與皇宮建築的華麗，建築色彩豐富，並採用金線蘇式彩畫裝飾，南北中軸線略向東偏移，增添靈動之感。2001年起，故宮博物院與世界建築文物保護基金會合作，對倦勤齋及整個寧壽宮花園進行分階段修復，2008年倦勤齋修復完成，作為故宮大修的試點工程，其經驗對故宮的整體保護具有重要意義。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 250, 
                y: 809, 
                width: 230, 
                height: 115, 
                text: "養心殿造辦處", 
                description: "養心殿造辦處，簡稱「造辦處」，位於紫禁城外廷西部，慈寧宮以南，是清朝內務府下屬的官辦作坊之一。其創建時間主要有康熙十九年（1680年）及康熙三十年（1691年）兩種說法，初設於養心殿四周的平房內，後因需求增加遷至慈寧宮茶飯房，仍稱為「養心殿造辦處」。該處專責製作、修繕及存儲宮廷所需的各項器物，內部分為多個「作」、「處」、「廠」、「館」，如玻璃廠、如意館等。其歷史檔案《造辦處各作成做活計清檔》記錄了該機構的詳細運作，涵蓋製作、修繕過程及交接細節，至雍正、乾隆年間達到鼎盛，製作了大量清式家具精品如紫檀寶座和嵌剔紅靠背寶座等。根據《乾隆京城全圖》，造辦處位於慈寧宮花園東南，呈曲尺形，與花園間隔一條甬道，設有迎禧門作為正門，其建築南側則鄰接內務府公署並有冰窖設施，形成一個功能多樣、布局精巧的宮廷作坊體系。",
                color: "rgba(255, 165, 0, 0.5)"
            },

        ];
        this.locations2 = [
            { 
                x: 703, 
                y: 755, 
                width: 114, 
                height: 40, 
                text: "太和殿", 
                description: "太和殿俗稱金鑾殿，為北京故宮外朝三大殿中最南面的殿。該殿是明清兩朝北京城內最高的建築，開間最多、進深最大和屋頂最高的大殿，堪稱中華第一殿。皇帝登基、冊立皇后等大典都在此舉行。太和殿是皇權的象徵，因而在各種形式上都刻意追求，以示與眾不同。太和殿並非皇帝日常上朝的地方，太和殿是只有在舉行大朝會或是皇帝御駕親征以及舉行重大儀式的地方，（皇帝平時處理公務的地方位在太和殿後方的乾清宮）。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 711, 
                y: 1260, 
                width: 90, 
                height: 38, 
                text: "午門", 
                description: "明代午門與天安門之間的廊廡全部是黃瓦，皇城禦道全部是漢白玉的；在清代午門與天安門之間的廊廡被改成灰瓦，皇城禦道更換成青石板。這是一大變化。明代的午門，兩邊的燕翅樓是籙頂的，而不是現代的攥尖頂。而且午門外的朝房也是黃瓦，中間禦道是漢白玉的，不是現在的青石板。且在明朝紫禁城正門午門前有6座石製大象雕塑，但是到了清朝時期，這六尊大象雕塑已經被損毀，看不到了。皇城的正門是皇宮的「皋門」，是宣召的地方，就像大明宮宣召在丹鳳門，北京皇宮宣召在承天門。",
                color: "rgba(255, 165, 0, 1)"
            },
        ]
        this.locations3 = [
            { 
                x: 930, 
                y: 895, 
                width: 34, 
                height: 54, 
                text: "體仁閣", 
                description: "體仁閣，位於紫禁城太和殿前廣場東廡，與西廡弘義閣遙遙相對。體仁閣始建於明朝永樂十八年（1420年），初名「文樓」，後經多次改名，至清朝順治三年（1646年）改為現在的名稱。乾隆四十八年（1783年），體仁閣因火災被毀，隨後依照弘義閣的形制重建。體仁閣曾經存放《永樂大典》，並在明朝大朝會和重大典禮中發揮重要作用，如皇帝大婚、皇太子納妃儀式等。康熙年間，體仁閣成為舉辦博學鴻儒大比的場所，並為《明史》編纂提供了場所。清代乾隆年間，體仁閣的兩廡設有內務府庫房。歷經多次維修與加固，並在2003至2005年進行了故宮古建築修繕計劃，但由於修繕過程中發現部分結構問題，工程曾一度停工。體仁閣目前作為文物庫房使用，收藏了包括馬車在內的多項文物。建築上，體仁閣高25米，設有兩層，上層為七間，四面設有走廊，下層為九間，並擁有精美的琉璃瓦屋頂和支撐屋頂的方形擎檐柱，外觀莊重且氣勢雄偉。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 550, 
                y: 894, 
                width: 36, 
                height: 53, 
                text: "弘義閣", 
                description: "弘義閣，位於紫禁城太和殿前廣場西廡，與東廡體仁閣遙遙相對。弘義閣始建於明朝永樂十八年（1420年），最初稱為「武樓」，後於明嘉靖四十一年（1562年）改名「武成閣」，至清朝順治三年（1646年）改為「弘義閣」。明朝時，弘義閣作為公主出嫁的典禮場所，與文樓一同承辦皇帝的重大婚禮儀式。至清朝，弘義閣兩廡用作內務府的庫房，儲存金銀珠寶等貴重物品，並且為皇帝和皇后的宴會提供金銀器皿。弘義閣於1919年和1921年進行了加固維修，但因結構問題於1953年再次翻修。2005年，經過修繕的弘義閣重新開放，並作為故宮博物院的常設展覽場地，展示清朝宮廷音樂與典制樂器，讓觀眾了解清朝宮廷音樂的歷史與發展。展覽中的音樂復原採用了數字音頻技術，重現了當時宮廷的樂曲。2011年，弘義閣的展廳因內部調修暫停開放。弘義閣的建築風格與體仁閣相似，兩者作為太和殿的陪襯建築，具有對稱的結構。弘義閣保持了明朝天啟七年的建築遺構，其樓高23.8米，屋頂採用單檐廡殿頂，樓閣之間設有腰檐，既符合建築等級，又與周圍環境和諧。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 400, 
                y: 1042, 
                width: 17, 
                height: 42, 
                text: "凝道殿", 
                description: "武英殿的東配殿，面闊五間，黃琉璃瓦單檐懸山頂，原為前出廊，後改為正間前出廊。凝道殿以北有值房（廊房），頂覆黃琉璃瓦。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 299, 
                y: 1042, 
                width: 16, 
                height: 42, 
                text: "煥章殿", 
                description: "武英殿的西配殿，面闊五間，黃琉璃瓦單檐懸山頂，原為前出廊，後改為正間前出廊。煥章殿以北有值房（廊房），頂覆黃琉璃瓦。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 930, 
                y: 551, 
                width: 33, 
                height: 46, 
                text: "景運門", 
                description: "景運門（滿語：ᡤᡳᠩᠶᡡᠨᠮᡝᠨ，穆麟德轉寫：ging yūn men）位於紫禁城乾清門前廣場的東側，是內廷與外朝東路的重要通路，始建於明朝永樂十八年（1420年），萬曆二十六年（1598年）重修，清朝順治十二年（1655年）再度修葺。景運門與隆宗門相對，皆為通往乾清門前廣場的重要入口，因此又稱「禁門」。清朝時，規定親王以下及大員僅可至門外台階20步以外停立，嚴禁擅入門內，以示森嚴。2014年，為消除安全隱患，故宮博物院拆除了景運門內的彩鋼房，恢復其歷史原貌。景運門坐西朝東，面闊五間，採用黃琉璃瓦單檐歇山頂，單昂三跴斗拱，整體為徹上明造，梁枋繪以墨線大點金旋子彩畫，門道內外設有礓磋慢道，便於車輿通行。門內北側有蒙古王公大臣值房及九卿值房，南側為奏事待漏值所；門外東側為奉先殿，北側則是毓慶宮，構成紫禁城東部的重要建築群。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 550, 
                y: 551, 
                width: 36, 
                height: 45, 
                text: "隆宗門", 
                description: "隆宗門位於紫禁城乾清門前廣場的西側，與東側的景運門相對，是內廷與外朝西路及西苑的重要通道。隆宗門始建於明朝永樂十八年（1420年），萬曆二十六年（1598年）重修，清朝順治十二年（1655年）再次修葺。隆宗門非奏事待旨或宣召，王公大臣亦不得私入。清朝皇帝如康熙帝、雍正帝及道光帝均在紫禁城外西郊皇家園林駕崩，其梓宮迎入紫禁城時，均經隆宗門內舉行齋集舉哀儀式。嘉慶十八年（1813年）發生的「癸酉之變」與隆宗門關係密切。天理教起義軍在太監引導下攻至隆宗門，門已被守軍封閉，起義軍試圖翻牆進入，卻被養心殿守衛擊退，其中兩名天理教徒被皇二子旻寧（後來的道光帝）用火槍射殺。激戰中，有兩支箭射中隆宗門，一支留在門內側椽頭上，另一支嵌於門外額匾的「宗」字左側，現今僅餘箭鏃存留。2014年，為消除安全隱患，故宮博物院拆除了隆宗門內的彩鋼房（原為快餐廳）。隆宗門建築形式與景運門相同，面闊五間，採黃琉璃瓦單檐歇山頂，單昂三踩斗拱，徹上明造，梁枋以墨線大點金旋子彩畫裝飾。門道內外設礓磋慢道，方便車輿通行。隆宗門內北側為軍機處值房，門外正西則是慈寧宮，整體構成紫禁城西部的關鍵建築群。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1107, 
                y: 670, 
                width: 40, 
                height: 110, 
                text: "御茶膳房", 
                description: "御茶膳房位於紫禁城東路、南三所西側，是清朝負責宮內飲食及筵宴事務的重要機構，隸屬內務府。始於順治年間，初稱「茶房」與「膳房」，乾隆十三年（1748年）合併為「御茶膳房」，長官由皇帝特簡。其下設膳房、茶房、肉房與乾肉房，並在乾隆三十六年（1771年）設檔案房管理文書檔案，包括膳底檔等。御茶膳房的建築特色包括位於南三所西側的黃琉璃瓦房和多處分支機構，例如紫禁城內的膳房、養心殿御膳房、御茶房，以及各地御園與行宮的膳房。此外，清雍正年間曾下諭要求妥善處理飲食剩餘，體現清宮飲食管理的細緻與節儉。現代修繕工程亦對御茶膳房進行保護與修繕，成為故宮重要的歷史建築之一。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 431, 
                y: 464, 
                width: 34, 
                height: 76, 
                text: "西三所", 
                description: "西三所位於慈寧宮東部。康熙二十六年，將慈寧宮東部的五間新建宮殿拆遷至孝陵附近，這是因為昭聖太皇太后生前非常喜歡這組宮殿。這組宮殿拆除後，在原址建設頭所殿、二所殿、三所殿。三座殿均各成一院，自南向北排列。其中頭所殿在慈寧宮的正東；二所殿在大佛堂的正東；三所殿在東宮殿的正東。院內建築均覆灰色筒瓦。頭所殿以南，有一座排房，南北長、東西窄，位於東側的宮牆內，後來拆除改建為故宮博物院的職工浴室，2014年為消除安全隱患，建設「平安故宮」，故宮博物院拆除磚混結構的職工浴室[17]；該排房南側另有一座排房，位於慈寧宮外圍宮牆內的東南角，東西長、南北窄，頂覆黃琉璃瓦，其南為慈寧宮南側外圍宮牆，其北有一東西走向的院牆，與上述北側的排房相隔。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1305,
                y: 194, 
                width: 60, 
                height: 95, 
                text: "慶壽堂", 
                description: "慶壽堂是紫禁城內寧壽宮後部東路的一組建築，位於閱是樓以北，建於乾隆三十七年（1772年）。該建築經歷了嘉慶七年（1802年）和光緒十七年（1891年）的重修，並於1949年5月和6月，人民政府出資對其進行了修繕，這是北平和平解放後對故宮的首項修繕工程。慶壽堂由前後四進院落組成，院落呈長方形，南北較長，東西較窄。建築的正殿通常面闊五間，進深一間，設有前後出廊，每一進院落的東西配殿則為三間，進深一間。主要建築的牆體使用水磨磚，室內以青磚為地面，外檐繪有蘇式彩畫。屋頂使用琉璃瓦，其中前院為綠琉璃瓦黃剪邊，後院則為黃琉璃瓦綠剪邊。慶壽堂的主入口是垂花門，並且內有尋沿書屋，該書屋為乾隆三十七年所建，命名源於乾隆帝的詩句。慈禧太后曾在樂壽堂（寧壽宮）居住時，將慶壽堂作為醇親王福晉、恭親王之女、慶親王之女等人的暫居之所。慶壽堂保存完好，是紫禁城中的重要建築之一。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1360, 
                y: 972, 
                width: 20, 
                height: 63, 
                text: "清史館書庫", 
                description: "清史館書庫，又稱清史館大庫，原為清朝國史館書庫，位於紫禁城東華門內。乾隆三十年（1765年），國史館重設後成為常設機構。1914年，北京政府於國史館舊址成立清史館，書庫隨之劃歸清史館。清史館在館長趙爾巽主持下，利用書庫收藏的檔案資料，組織近百人進行《清史稿》編纂，歷時14年（1914-1927年）完成。書稿完成後，清史館停辦。1928年6月，南京國民政府接收故宮，包括清史館大庫在內的檔案均被封存，後於1929年移交故宮博物院文獻館及圖書館管理，並在南三所進行分類整理。清史館大庫內保存的檔案涵蓋運河奏摺、考察憲政奏摺、八旗襲職檔、史書、奏議、起居注稿本等豐富內容，既包括國史館和清史館編纂的史料，也有清朝歷朝實錄稿本及官員履歷等資料。1933年，故宮博物院因局勢動盪南遷檔案，其中包括清史館大庫的83箱檔案，1949年後部分陸續運回。中華人民共和國成立後，清史館大庫繼續保存明清歷史檔案，1960年代經修繕後提升防潮與通風性能，1976年檔案遷至西華門新建庫房，大庫則轉作文物儲藏用途。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 385, 
                y: 619, 
                width: 89, 
                height: 170, 
                text: "養心殿造辦處", 
                description: "養心殿造辦處，簡稱「造辦處」，位於紫禁城外廷西部，慈寧宮以南，是清朝內務府下屬的官辦作坊之一。其創建時間主要有康熙十九年（1680年）及康熙三十年（1691年）兩種說法，初設於養心殿四周的平房內，後因需求增加遷至慈寧宮茶飯房，仍稱為「養心殿造辦處」。該處專責製作、修繕及存儲宮廷所需的各項器物，內部分為多個「作」、「處」、「廠」、「館」，如玻璃廠、如意館等。其歷史檔案《造辦處各作成做活計清檔》記錄了該機構的詳細運作，涵蓋製作、修繕過程及交接細節，至雍正、乾隆年間達到鼎盛，製作了大量清式家具精品如紫檀寶座和嵌剔紅靠背寶座等。根據《乾隆京城全圖》，造辦處位於慈寧宮花園東南，呈曲尺形，與花園間隔一條甬道，設有迎禧門作為正門，其建築南側則鄰接內務府公署並有冰窖設施，形成一個功能多樣、布局精巧的宮廷作坊體系。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 478, 
                y: 630, 
                width: 34, 
                height: 158, 
                text: "冰窖", 
                description: "冰窖是清朝用來貯藏皇室用冰的重要設施，位於紫禁城西路，共有五座。《養吉齋叢錄》記載，紫禁城內的五座冰窖中，其中四座各可藏冰五千塊，另一座可藏冰九千二百二十六塊。《欽定大清會典》中提到，冰由工部備辦，並納入紫禁城內的冰窖。《欽定總管內務府現行則例》進一步補充，最初只有一座冰窖，存放通州冰，後來統一改為御河冰。冰窖的具體位置在養心殿造辦處以東，呈南北分布，形成一個南北長、東西窄的長條形院落。2013年，故宮博物院院長單霽翔宣布，故宮內的五座冰窖將逐步開放，用作「觀眾服務中心」。到了2017年初，部分冰窖已被改造為冰窖餐廳並對外營業。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 1364, 
                y: 120, 
                width: 29, 
                height: 458, 
                text: "南、北十三排", 
                description: "南、北十三排位於紫禁城寧壽宮外東側，分為南北各13座排房，建於清朝乾隆年間，東鄰紫禁城東城牆。南十三排和北十三排每排房相向而設，共有12座排房，排房面闊三間，進深一間，前出廊，明間設有門，灰瓦硬山頂。每兩座排房形成一個院，南十三排和北十三排各分為六個院，每個院的西牆設有一座院門。北端一座排房擁有小南房兩間，南端的南牆中間設有垂花門，門外通向斂禧門。紫禁城出版社的主要辦公區設在南十三排。",
                color: "rgba(255, 165, 0, 0.5)"
            },{ 
                x: 134, 
                y: 80, 
                width: 45, 
                height: 60, 
                text: "城隍廟", 
                description: "城隍廟位於紫禁城西北角，建於清朝雍正四年（1726年），並在咸豐七年（1857年）進行修葺。每年萬壽節和季秋時，內務府總管會在此致祭，並定期供奉祭品。由於城隍廟位於紫禁城的入水口處，兼有龍王和鎮水觀音的功能，當天旱時，皇帝會派大臣來此燒香求雨。乾隆帝曾在乾隆二十四年（1759年）親自撰寫祭文，表達求雨的心情。清朝滅亡後，城隍廟逐漸冷落，並在文化大革命時期遭遇破壞，幸好殿宇和神壇得以保留。其後，該地區被用作印刷廠，並在後來由《紫禁城》雜誌社接管。城隍廟的建築群位於紫禁城西北角，與神武門之間的水道相接，並依此水道建設。整座廟宇的建築依軸線自南向北分為山門、廟門和正殿，形成三進院。正殿坐北朝南，面闊五間，黃琉璃瓦硬山頂，並曾供奉紫禁城城隍之神。城隍廟的建築至今保存完好，包括山門、廟門、東西配殿等。",
                color: "rgba(255, 165, 0, 0.5)"
            },
        ]
        this.locations4 = [
            
            { 
                x: 391, 
                y: 976, 
                width: 18, 
                height: 13, 
                text: "恆壽齋", 
                description: "位於武英殿建築群的東北角，頂覆黃琉璃瓦。清朝時，此處為繕校《四庫全書》諸臣值房。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 298, 
                y: 1008, 
                width: 18, 
                height: 13, 
                text: "浴德堂", 
                description: "浴德堂位於紫禁城武英殿院內西北平台上，緊鄰敬思殿西側，名稱取自《禮記·儒行》中「儒有澡身而浴德」之句，寓意修身養德，為清朝詞臣校書的值房，負責刊刻與裝潢圖書事宜。浴德堂坐北朝南，面闊三間，黃琉璃瓦卷棚歇山頂，後檐西側接抱廈兩間，堂後偏西有北房，面闊兩間，亦為黃琉璃瓦卷棚硬山頂。堂內東次間後檐設有門，通往一條磚砌拱券曲折通道，連接後室。後室平面呈方形，上覆穹頂，帶有阿拉伯式建築風格，內部以素白琉璃面磚裝飾，頂部設有圓窗，後牆建有鐵製壁爐用於燒水。後室外設有鍋台，旁有井亭，井水通過懸石槽引入鍋台，加熱產生蒸氣供應後室，具備浴室功能。據考證，該後室為元代宮城內遺存的土耳其浴室，相傳明朝時曾作為皇帝齋祓的場所，清朝時在武英殿設御書處後，改為蒸紙處，用於蒸熏印刷圖書所需的紙張。位於浴德堂西北、武英殿建築群西牆外最北端的井亭，頂覆黃琉璃瓦，是供應鍋台用水的重要設施。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1146, 
                y: 1031, 
                width: 32, 
                height: 13, 
                text: "傳心殿", 
                description: "傳心殿位於紫禁城東南隅的文華殿東側，是清朝皇帝在御經筵前舉行「祭告禮」的場所。創建於康熙年間，「經筵」是為皇帝研習經史而設的講席，通常於每年春秋兩季舉行，遇酷暑或嚴寒則暫停。傳心殿為一組祭祀性建築，院落南北長100米，東西寬25米，占地2500平方米。院內自南向北依次設有治牲所、景行門、傳心殿等建築。治牲所位於最南端，坐南朝北，面闊五間，頂覆黃琉璃瓦。景行門居中，面闊三間，明間前後檐開門，旁有「大庖井」，井水清洌，與玉泉山水齊名。傳心殿為主建築，位於景行門北，面闊五間，殿內中央供奉伏羲、神農等歷代賢師塑像，東設周公位，西設孔子位。殿後建有祝版房、神廚及值房，分別面闊三至五間，為祭禮及日常管理所用。整座建築布局嚴謹，是清代皇帝祭祀及文化傳承的重要場所。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 535, 
                y: 130, 
                width: 28, 
                height: 12, 
                text: "重華宮", 
                description: "重華宮位於崇敬殿以北，是中院的正殿，建築面闊五間，進深一間，覆以黃琉璃瓦硬山頂，明間設門，其餘為檻窗，前接抱廈三間。宮內明間與東次間、西次間以紫檀雕花槅扇分隔，槅扇雕工精湛，堪稱紫禁城內檐裝修的典範。光緒十七年（1891年），東次間槅扇改為子孫萬代葫蘆落地罩。重華宮外檐上方懸掛「重華宮」匾額，增添皇家氣派。西次間為乾隆帝賜群臣茶宴、賦詩聯句及觀戲之地，內設紫檀雕花頂豎櫃和平頭案，並陳列乾隆御筆貼落等文物。東梢間稱為芝蘭室，是乾隆帝休憩之所，通炕配以十二月花卉雕屏，炕前有炕幾、炕案及香爐，北牆懸掛《鶴鹿同春圖》掛屏，文玩茶具點綴其間。重華宮東配殿為葆中殿，內額題「古香齋」，曾用於收藏《欽定古今圖書集成》；西配殿為浴德殿，額曰「抑齋」，作為乾隆帝書室使用。院內東西兩側各建有井亭，東亭有井，西亭為對稱設計，整體布局兼具實用與美觀，展現皇家生活的精緻與格調。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 420, 
                y: 227, 
                width: 20, 
                height: 12, 
                text: "撫辰殿", 
                description: "建福門內為第一進院落，撫辰殿位於院落中間。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 420, 
                y: 204, 
                width: 20, 
                height: 12, 
                text: "建福宮", 
                description: "建福宮位於紫禁城內廷西路，西六宮的西側，建於乾隆七年（1742年），由乾西五所中的西四所及其南側狹長地區改建而成，嘉慶七年（1802年）曾重修。建福宮最初設計是作為乾隆帝「備慈壽萬年之後居此守制」之地，但最終未被用作此用途。乾隆帝對建福宮非常喜愛，時常來此遊憩並賦詩，如《建福宮賦》和《建福宮紅梨花詩》。清宮定制每年臘月初一，皇帝會在此開筆書福，以慶賀新年。咸豐年間，咸豐帝曾奉皇貴太妃於建福宮進膳，孝德顯皇后和孝貞顯皇后的神位也曾設於此。即使在1923年建福宮花園大火中，建福宮建築仍得以完整保存。建福宮與撫辰殿由寬敞的甬道相連，撫辰殿的後檐廊與建福宮前廊及東西轉角遊廊構成廊院。建福宮建築面闊五間，進深三間，採用黃琉璃瓦綠剪邊卷棚歇山頂，檐下有斗拱裝飾，前後檐的明間安裝四扇三交六椀菱花槅扇門，次間和梢間設有檻窗與磚牆。內部採「一明兩暗」格局，明間後檐金柱之間設有寶座，寶座上方懸掛乾隆御書「不為物先」匾，槅扇與裙板皆為黑漆描金，並飾有五彩吉祥圖案。建福宮室內裝飾極為精緻，天花、銀花紙等均展示高超工藝，是紫禁城內裝修的代表之作。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 420, 
                y: 180, 
                width: 20, 
                height: 18, 
                text: "惠風亭", 
                description: "從建福宮兩側的遊廊可來到第三進庭院，庭院中央是惠風亭。惠風亭北側用紅牆隔出最後一進院落，院落中的靜怡軒、慧曜樓後來被劃入建福宮花園。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 388, 
                y: 117, 
                width: 22, 
                height: 14, 
                text: "吉雲樓", 
                description: "位於花園北端，敬勝齋東側的淨房和慧曜樓之間，坐北朝南。復原設計方案為：「三開間歇山樓，面闊三間，進深一間，前出廊，七檁卷棚頂，上檐重拱交麻葉斗拱，上下檐裝修為步步緊支摘窗，格扇門，瓦頂黃琉璃瓦綠卷邊，彩畫為金線方心式蘇畫。」",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 420, 
                y: 332, 
                width: 20, 
                height: 12, 
                text: "延慶殿", 
                description: "延慶殿，位於紫禁城內廷西路、中正殿雨花閣東側。清朝時，每逢立春，皇帝便在延慶殿九叩迎春，為民祈福。延慶殿位於延慶門內。延慶殿以北，是廣德門。延慶門以南還有一院，院內東、西兩側各有群房。廣德門以北到建福宮的建福門以南，是一個沒有建築的南北長、東西窄的院落。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 530, 
                y: 117, 
                width: 38, 
                height: 11, 
                text: "翠雲館", 
                description: "翠雲館位於重華宮以北，是後院的正殿，兩側附有耳房及東西配殿。建築面闊五間，進深一間，覆以黃琉璃瓦硬山頂，明間開門，其餘為檻窗。館內裝修以黑漆描金為主，精美絕倫，隔間以四扇金漆山水圖隔扇組成，隔扇上部為勾雲紋窗櫺，牆上陳設紫檀百寶嵌博古圖及漆地百寶嵌花鳥圖掛屏，相映成趣。西梢間北牆上下分層，上層為閣樓式設計，內置八扇花鳥圖屏風；下層為炕，配炕桌、炕案及紫檀框雙面繡隔扇，炕下西側置紫檀雕花大案，東側設書格式帘子隔塵。東次間匾額題「長春書屋」，為乾隆帝即位前的讀書處，東次間與東梢間之間設有祥雲門，門旁掛聯「四季風光無盡藏，百城古帙有餘香」，門上掛「養雲」匾，東梢間內設有黑漆描金插屏及紫檀長桌，均保持乾隆時期原狀。整體陳設與佈局充分體現皇家居所的奢華與文化內涵。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 366, 
                y: 337, 
                width: 30, 
                height: 19, 
                text: "雨花閣", 
                description: "雨花閣是一座融合藏式佛教建築風格的樓閣式建築，外觀三層，底層面闊三間、進深三間，四周設有出廊，乾隆三十二年（1767年）增建了前檐抱廈三間。建築的屋頂設有南北卷棚頂與東西歇山頂，覆蓋著綠琉璃瓦，屋脊及剪邊使用黃琉璃瓦，顯示出獨特的藏式風格。屋內天花繪有六字真言和法器圖案，富有宗教意涵。二層設計與底層類似，面闊三間、進深三間，南、東、西三面設有平座，並安裝檻窗。頂層面闊一間、進深一間，正面有四扇槅扇門，兩側是槅扇窗，四角攢尖頂，覆蓋鎏金銅瓦，屋脊上裝飾銅鎏金行龍，寶頂上安放鎏金銅塔，這些銅材重達近千斤，顯示出建築的華麗與尊貴。整體建築不僅具有宗教意義，還展現出清代宮廷對藏傳佛教的尊崇。該建築的設計與裝飾完美結合，凸顯了當時宮廷對佛教文化的推崇與藝術創造的高度。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 247, 
                y: 277, 
                width: 41, 
                height: 11, 
                text: "壽安宮", 
                description: "壽安宮位於紫禁城內廷外西路，壽康宮以北，英華殿以南，現為故宮博物院圖書館所在地。壽安宮始建於明朝，初名「咸熙宮」，嘉靖四年（1525年）改稱「咸安宮」，為皇太后、太妃、嬪等的居所。明朝仁聖皇太后及天啟年間乳媼客氏曾居於此。《天啟宮詞》記載，客氏每日清晨進乾清暖閣侍帝，夜晚返回咸安宮，居處奢侈僭越，例如夏季設大涼棚、賜冰無數，冬季取暖物資供應無量。清初沿用咸安宮舊制，康熙年間太子胤礽的宮人曾居擷芳殿，胤礽被廢黜後被禁錮於咸安宮，期間發現厭勝物，康熙帝因此懲處相關涉事人員。雍正六年（1728年），咸安宮被設為官學，供三旗子弟和景山官學優秀學生學習，《欽定內務府現行則例》記載內務府選拔學生約五六十名或百餘名入住學習，並派翰林等教習。乾隆十六年（1751年），咸安宮官學遷出，宮殿修葺後改稱「壽安宮」，作為皇太后、妃的居所。乾隆年間，壽安宮成為皇太后壽辰慶典的重要場所，乾隆二十五年（1760年）為慶祝皇太后七十壽辰，在宮院中建三層大戲台。乾隆四十一年，暢音閣建成後，壽安宮戲台逐漸廢棄，嘉慶四年（1799年）戲台拆除，改建春禧殿後卷殿，作為昇平署行頭、切末的收貯處。1925年故宮博物院成立後，壽安宮被改為故宮博物院圖書館，沿用至今。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1088, 
                y: 210, 
                width: 39, 
                height: 15, 
                text: "天穹寶殿", 
                description: "天穹寶殿，位於紫禁城內廷東路，最初名為「玄穹寶殿」，始建於明朝，後來在清朝順治年間進行改建，並為避康熙帝名諱更名為「天穹寶殿」。它是宮廷道教活動的場所，專門祭祀昊天上帝，並與欽安殿、大高玄殿一同成為宮中道經的收藏地。每年，天穹寶殿會舉行多種道教活動，如天臘道場（正月初一）、天誕道場（正月初九）、萬壽平安道場（皇帝生辰）等，這些活動多由景陽宮的太監負責清掃與維護。歷代皇帝，特別是清朝的同治帝和光緒帝，曾到此拈香祈求天氣順利，並進行祈雪或祈晴等儀式。建築上，天穹寶殿的院落呈長方形，正殿坐北朝南，面闊五間，黃琉璃瓦歇山頂。正殿內懸掛著乾隆帝的御筆對聯「無言妙化資元始，不已神功運穆清」，顯示出其神聖與尊貴。東、西配殿各三間，並且南院有九間群房。作為紫禁城的重要建築之一，天穹寶殿至今仍保持良好狀態，成為了解宮廷道教文化與建築藝術的重要遺址。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1246, 
                y: 344, 
                width: 37, 
                height: 11, 
                text: "養性門", 
                description: "位於寧壽宮後面，為寧壽宮後寢的正門。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1245, 
                y: 192, 
                width: 47, 
                height: 9, 
                text: "頤和軒", 
                description: "頤和軒位於樂壽堂正北，與景祺閣通過穿廊相連，形成工字殿布局。建於乾隆三十七年（1772年），後經嘉慶七年（1802年）及光緒十七年（1891年）重修。頤和軒面闊七間，進深一間，單檐歇山頂，覆黃琉璃瓦，前檐出抱廈五間，後檐出抱廈三間，其他各間有廊環繞。內部結構講究，明間設五抹頭槅扇門，次間為檻窗，稍間則為步步錦支摘窗。北側穿廊連接景祺閣，並通往兩側小院。頤和軒前月台左側設日晷，甬路通向樂壽堂，兩側有琉璃花池。前檐下懸「頤和軒」匾（乾隆帝題），內部北側懸「太和充滿」匾，對聯為「景欣孚甲含胎際，春在人心物性間」。南側門上有乾隆御題《頤和軒詩》，展現乾隆年間的藝術風華與建築之美。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1324, 
                y: 340, 
                width: 19, 
                height: 14, 
                text: "暢音閣", 
                description: "暢音閣位於寧壽宮後區東路南端，是清宮內廷的重要演戲場所，建於乾隆三十七年（1772年），並於乾隆四十一年完成。這座建築在嘉慶年間進行了多次修繕與改建，並成為清代三大戲樓之一。暢音閣與頤和園的德和園大戲樓、承德避暑山莊的清音閣並列，其中避暑山莊的清音閣在1945年被毀。暢音閣有三層戲台，其中壽台、祿台、福台分別位於不同層次，台面下設有地井與水井，可供升降演員和道具使用。暢音閣和閱是樓自1944年起成為故宮博物院的戲曲陳列場所，並於2017年重新開放，恢復了宮廷戲曲的演出。這座建築不僅是歷史文化的見證，也是現今展示清代宮廷文化的重要場所。暢音閣在2017年迎來了美國總統川普的到訪，當時他與夫人彭麗媛一同參觀了暢音閣，並欣賞了京劇《梨園春苗》、《美猴王》和《貴妃醉酒》等劇目。這次訪問不僅展示了中國傳統戲曲文化的魅力，也成為中美文化交流的象徵之一。在此行程中，川普與習近平一同欣賞了京劇表演，並對景泰藍工藝品和製作技藝進行了互動展示。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1321, 
                y: 291, 
                width: 21, 
                height: 16, 
                text: "閱是樓", 
                description: "閱是樓位於暢音閣北側，單檐二層，卷棚歇山頂，覆黃琉璃瓦綠剪邊，金龍和璽彩畫。閱是樓面闊五間，進深三間，前出廊。下層的明間開有玻璃門三扇，次間、稍間是檻牆、支摘窗，上支窗是雙步步錦格心，下是玻璃窗。上層明間安有槅扇六扇，次間、稍間的裝修和下層相同。閱是樓下層的東、西次間靠南窗都設有寶座床。閱是樓東、西辟門連通兩側轉角廡房，再和東西廂廊相連接，經過南部的轉角廡房可到達暢音閣南側的扮戲樓。閱是樓正面（南面）上方懸掛「閱是樓」匾（乾隆帝題）。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1330, 
                y: 119, 
                width: 29, 
                height: 11, 
                text: "梵華樓", 
                description: "梵華樓位於寧壽宮區東北端，是清朝紫禁城佛堂之一。梵華樓建於清朝乾隆三十七年（1772年），依照藏傳佛教顯宗與密宗四部供奉佛像、唐卡及供器，將顯宗、密宗集合於一體，體現了藏傳佛教格魯派顯密雙修的特點。梵華樓內的佛像塑造出藏傳佛教的諸佛菩薩及護法形象，是研究藏傳佛教造像的重要資料。梵華樓的建築及陳設形式成為清朝宮廷佛堂的重要模式，並在清宮檔案中稱之為「六品佛樓」。建築上，梵華樓位於寧壽宮區最東北端，北面倚靠寧壽宮區北宮牆，建築坐北朝南，二層樓，面闊七間，設有卷棚歇山頂。一層的明間供奉旃檀佛銅像，高210厘米，東西兩側各有三室，分別供奉乾隆三十九年（1774年）製作的掐絲琺瑯大佛塔6座，佛塔周圍牆面掛有通壁大幅唐卡，唐卡上繪有54尊護法神。各室中央有天井，並通向二層。二層圍繞天井設有紫檀木圍欄，琺瑯塔頂位於天井的中央。二層的明間供奉木雕金漆宗喀巴像，其餘六間分別為顯宗、密宗部的供奉室。每個室內供奉密宗、顯宗主尊的銅像，各有9尊，並設有紫檀木千佛龕，龕內供奉122尊小銅像。六個室共計供奉786尊佛像。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1298, 
                y: 119, 
                width: 21, 
                height: 11, 
                text: "佛日樓", 
                description: "佛日樓位於紫禁城寧壽宮區東路北端、梵華樓西側，是清朝宮廷佛堂之一。佛日樓建於乾隆三十七年（1772年），仿照建福宮花園中的慧曜樓而興建，北依寧壽宮區的北宮牆，東側有石梯連接梵華樓。佛日樓為兩層，上下各三間，頂部覆有黃琉璃瓦綠剪邊卷棚歇山頂。一層分隔成數個室，供奉藏傳佛教五大密宗主尊（金剛密集、上樂金剛、大威德金剛、喜金剛、時輪金剛）、五方佛及釋迦牟尼佛。二層則供奉三世佛（釋迦牟尼佛、燃燈佛、彌勒佛）、十八羅漢、四大天王，北壁、東壁、西壁設有長條供案，案上供奉378尊無量壽佛小銅像。佛日樓前用虎皮石飾面牆圍繞形成小院，院中設有月亮門，門外是景祺閣東院，西行可到達景福宮。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1191, 
                y: 217, 
                width: 30, 
                height: 13, 
                text: "萃賞樓", 
                description: "位於第三進院落北側。建於清朝乾隆三十七年（1772年），嘉慶年間、光緒年間先後進行修葺。萃賞樓坐北朝南，卷棚歇山頂，黃琉璃瓦綠剪邊。上下分為兩層，各面闊五間，前後出廊。萃賞樓正面下層是明廊，上層東四間是明廊，西梢間隔成暗廊，明間開有門，其他各間均為窗。萃賞樓的後檐下層兩次間分別開一門，上層中間開門，其他各間均為窗。隔扇門都是步步錦隔心，夔龍團紋裙板，窗是步步錦支摘窗。上下檐柱之間設有雕花彩繪木欄杆。外檐飾有博古紋蘇式彩畫，檐下安有倒掛楣子。萃賞樓上後檐明間的門外架有一座凌空的白石小橋，通至後山主峰上的碧螺亭。萃賞樓前的假山峰巒疊起，洞谷連通。萃賞樓西側有上下遊廊通往雲光樓。萃賞樓下西室匾曰「聚景」，兩旁楹聯為「金界樓台思訓畫，碧城鸞鶴義山詩」。樓上兩匾，一為「積芳」，一為「延綠」，楹聯為「素壁題詩還自檢，明窗披帙雅相親」。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 278, 
                y: 707, 
                width: 20, 
                height: 14, 
                text: "臨溪亭", 
                description: "慈寧宮花園的主要建築之一。始建於明朝萬曆六年（1578年），初名「臨溪館」，萬曆十一年五月（1583年）更名「臨溪亭」。慈寧宮花園中部偏南，有一座東西走向窄長的矩形水池，臨溪亭便位於該水池中央的單孔磚石券橋上，東西兩側均臨水，南北出階，和慈寧宮花園南入口、假山及花園北部的咸若館、慈蔭樓都位於花園的南北中軸線上。臨溪亭平面呈方形，面闊三間、進深三間，四面均中央開門，斜方格槅扇門各四扇，兩側都是斜方格檻窗，窗下檻牆貼飾黃綠色琉璃花磚，臨水兩側的門前加設有木護欄。臨溪亭屋頂為四角攢尖式，黃琉璃瓦綠剪邊，檐下施斗栱。室內有花卉圖案海墁天花，當心繪有蟠龍藻井。臨溪亭東西兩側的池畔環繞著漢白玉望柱欄板，池水清澈，池中有魚，並種植蓮花。臨溪亭是皇太后、太妃、太嬪休憩、賞花、觀魚的好場所。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 800, 
                y: 379, 
                width: 32, 
                height: 24, 
                text: "昭仁殿", 
                description: "昭仁殿位於北京故宮乾清宮東側，是一座具有深厚歷史背景的小殿，原名弘德殿，始建於明朝，萬曆十四年（1586年）更名為昭仁殿。明崇禎十七年，崇禎帝在昭仁殿砍殺昭仁公主後赴景山自縊，為明朝覆亡的重要歷史場景之一。清朝時，昭仁殿成為皇帝讀書與藏書之地，乾隆帝在此建立「天祿琳琅」藏書系統，精選善本並編撰書目。然而嘉慶二年（1797年）的火災燒毀大部分藏書，後於次年重建並完成《天祿琳琅續編》。建築上，昭仁殿為單檐歇山頂，黃琉璃瓦覆頂，設有抱廈及後室，是院落內的重要結構。其東側的龍光門為正宮通往東路的通道。昭仁殿見證了明清兩代的重大歷史事件及文化發展。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 688, 
                y: 379, 
                width: 32, 
                height: 24, 
                text: "弘德殿", 
                description: "弘德殿位於北京故宮乾清宮西側，是一座承載深厚歷史的小殿，始建於明朝，原名「雝肅殿」，萬曆十四年（1586年）更名為「弘德殿」，並曾作為皇帝的寢宮。明朝時，弘德殿是皇帝召見臣工之處，清朝則成為皇帝辦理政務及讀書的重要場所。康熙帝曾在此進講經典、探討吏治，乾隆帝則題匾表彰此地。順治年間，弘德殿還用於祭告孔子，並以「弘德殿書房」之名聞名於同治年間。建築風格上，弘德殿為單檐歇山頂，黃琉璃瓦覆頂，設有抱廈與後室，內懸多處乾隆帝御題匾額。其西側的鳳彩門為正宮通往西路的通道，與昭仁殿東側的龍光門對稱，是一座見證明清歷史的重要建築。",
                color: "rgba(255, 165, 0, 1)"
            },
        ]
        this.locations5 = [
            { 
                x: 38, 
                y: 1116, 
                width: 10, 
                height: 28, 
                text: "西華門", 
                description: "西華門是北京紫禁城的西門，位於神武門和午門之間的西側。它原本是紫禁城內廷的主要出入口之一，與東華門相對。西華門修建於明永樂十八年，與紫禁城其他部分同期建成。其建築風格為重檐歇山頂，並配有黃琉璃瓦覆蓋，體現了皇家建築的尊貴與典雅。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1460, 
                y: 1118, 
                width: 10, 
                height: 32, 
                text: "東華門", 
                description: "東華門是紫禁城的東門，位於紫禁城東城牆偏南，是故宮博物院除神武門外的另一個遊客出口。東華門始建於明朝永樂十八年（1420年）。清朝乾隆年間，東華門門樓被用於安放閱兵時的棉甲，並設置「恩豐倉」存放太監應領的米石。清初只允許內閣官員出入，乾隆中期則特許高齡的一、二品大員通行。東華門曾被民間稱為「鬼門」，原因在於清代皇帝、皇后、皇太后梓宮從此門出城，且門釘採用陰數的八路九顆格式。嘉慶年間的癸酉之變中，農民軍曾試圖經東華門進入紫禁城，但因意外被官兵發現而失敗。2015年，故宮博物院為慶祝建院90周年，開放了東華門及其古建築館。2020年3月16日，東華門因汽車撞擊損壞了一顆門釘。東華門坐西朝東，與西華門對應，外設下馬碑，內有文華殿和鑾儀衛內鑾駕庫，建築採黃琉璃瓦重檐廡殿頂，城樓形制與西華門相同，門匾現為銅質漢字。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 934, 
                y: 1135, 
                width: 20, 
                height: 30, 
                text: "協和門", 
                description: "協和門位於紫禁城外朝中路，太和門東側廊廡正中，是外朝通往東華門的重要通道，見證了多次重要歷史事件。明朝正統十四年（1449年），土木堡之變的消息傳入北京，引發震動，錦衣衛指揮馬順等王振餘黨在左順門附近被憤怒的大臣群起攻擊，馬順等人當場被亂拳打死，並懸屍於東安門外，史稱午門血案。此事穩定了京城局勢，也使左順門成為打擊宮廷小人的象徵。嘉靖三年（1524年），因世宗朱厚熜更改父母尊號之事，引發群臣不滿，兩百多名官員聚哭於左順門，試圖抗議朝廷的決策，史稱大禮議。這些事件顯示了協和門及周邊作為朝廷政治活動場所的特殊意義。協和門原名「左順門」，經歷了明清多次更名與修建，但其歷史地位始終未改，成為外朝政治風雲的見證者。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 560, 
                y: 1134, 
                width: 20, 
                height: 30, 
                text: "熙和門", 
                description: "熙和門位於紫禁城外朝中路，太和門外西側廡房正中，與協和門東西相對，是由西華門進入前朝的重要通道。此門始建於明永樂十八年（1420年），初名「右順門」。在明嘉靖年間，熙和門歷經多次火災與重建，名稱亦幾經更改：嘉靖四十一年（1562年）改名為「歸極門」，順治二年（1645年）改名為「雍和門」，乾隆元年（1736年）因避雍正皇帝諱而定名為「熙和門」。清乾隆二十三年（1758年），熙和門再度毀於火災，隨後重建。熙和門不僅是一座宮殿建築，還是歷代政治活動的重要場所。明代時，其梢間曾作為百官奏事之所，見證了多次朝廷政務的展開。清代時，熙和門南北兩側廡房則被用作翻書房及起居注館，分別承載文書整理及史書編纂的功能。儘管熙和門的建築形式相對簡約，但它在紫禁城中具有重要的交通與政治意義，連接外朝與前朝，是皇宮內外活動的重要通道之一。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 348, 
                y: 312, 
                width: 18, 
                height: 24, 
                text: "梵宗樓", 
                description: "位於雨花閣西北，是一座依牆興建的三開間卷棚歇山頂二層小樓。該樓體量極小，偏居雨花閣所在院落的西北隅，但供奉的主神地位很高。一樓供奉文殊菩薩青銅坐像，高1.1米，底座寬0.7米。二層供奉文殊菩薩化身大威德金剛青銅像，高1.72米，底座寬1.35米。這兩尊像分別為清宮內最大的文殊菩薩造像與大威德金剛造像。二樓陳列狼皮、虎皮、黃狐狸皮、貂皮、猞猁皮等各種獸皮扁幡；銅鍍金龍紋紅漆箱兩隻，箱內分別供奉皇帝龍袍、衣飾、盔甲；兵器架兩個，供奉刀槍及弓箭。上述供器意在將大威德金剛奉祀為戰神。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 321, 
                y: 644, 
                width: 12, 
                height: 22, 
                text: "寶相樓", 
                description: "寶相樓位於咸若館東側，原為明朝時期的東配殿，乾隆三十年改建為二層樓，成為咸若館的東配樓，是清代皇太后及太妃禮佛之所。建築坐東朝西，面闊七間，採用綠琉璃瓦黃剪邊卷棚歇山式頂，前檐出廊，樓上下兩層分為既連通又獨立的七間佛堂。下層明間供奉釋迦牟尼佛立像，其餘六間分別放置乾隆年間製造的掐絲琺瑯大佛塔，每塔頂直通天井，三面牆懸掛有繪有護法神像的唐卡。樓上明間供奉木雕金漆宗喀巴像，牆上懸掛釋迦牟尼與宗喀巴畫傳唐卡，其餘六間則設供案供奉顯宗與密宗主尊像，每室9尊，共54尊，對應樓下六室的54尊護法神像。六室內的兩側嵌有千佛龕，內供小銅佛像122尊，總計732尊，龕下設紫檀木經櫃，收藏佛經。此外，六室分別以顯宗與密宗中的事部、行部、瑜伽部、無上瑜伽部父續與母續為主題，供奉相關佛像、唐卡與供器，展現了格魯派顯密兼修的特色。寶相樓集顯宗密宗於一體，是清宮佛堂的重要模式，亦被清宮檔案稱為「六品佛樓」。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 248, 
                y: 644, 
                width: 12, 
                height: 22, 
                text: "吉雲樓", 
                description: "位於咸若館西側。明朝時，原為咸若館西配殿，清朝乾隆三十年（1765年）改建為二層樓，成為咸若館的西配樓。乾隆三十六年（1771年）懸掛題有滿文及漢文「吉雲樓」的匾額。吉雲樓坐西朝東，面闊七間，與東面的寶相樓相對。吉雲樓上、下室內正中都供奉有大尊佛像。佛像兩側各有一座帶有長方形底座以及多層台階的金字塔式供台，供台頂部為一道長牆式的千佛龕。供台上層層放置有五彩描金擦擦佛母像。吉雲樓屋梁、四壁各處滿做千佛龕，龕內供奉相同的五彩描金擦擦佛母像，共計一萬多尊。這種專門供奉擦擦佛的寬敞殿堂可能是中國內地藏傳佛教佛殿中的僅存者，連西藏也未見留存至今的實例。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1165, 
                y: 172, 
                width: 14, 
                height: 29, 
                text: "玉粹軒", 
                description: "位於第四進院落，西依宮牆，東為符望閣。清朝乾隆三十七年（1772年）仿建福宮花園凝暉堂而興建。玉粹軒面闊三間，前出廊，歇山卷棚頂，綠色琉璃瓦件飾檐、脊，其餘鋪𡧗黃色琉璃瓦。玉粹軒內分隔為三室，南為「得閒室」，北為佛堂。室內有通道向北通往竹香館。玉粹軒前東南側橫亙著一道用彩色石片貼面的短垣，北側通過遊廊向東和符望閣連接，將玉粹軒前隔出了一個小院。玉粹軒南和石山相連接，山上有蹬道通往山頂。得閑室對聯為「甄性神明鏡，陶情翰墨筵」。",
                color: "rgba(255, 165, 0, 1)"
            },{ 
                x: 1152, 
                y: 820, 
                width: 20, 
                height: 28, 
                text: "上駟院", 
                description: "上駟院是清朝內務府下屬的三個重要機構之一，負責管理皇室御用馬匹。清初沿用明朝的「御馬監」，順治十八年改稱「阿敦衙門」，滿語「阿敦」意為「馬群」。至康熙十六年始改為「上駟院」。該院掌管皇帝、后妃及皇子出行所用的馬匹，包括御馬（供皇帝使用）、內馬（備選御馬）等。上駟院分別在皇城內、南苑、安河設有十八個馬廄，並在口外及盛京等地設牧場，用於飼養馬匹與駱駝。根據《內務府冊》和《欽定大清會典》，上駟院不僅管理馬匹數量及分配，還負責提供所需草料及馬匹醫療服務。其內設有蒙古醫士三十名，專司骨傷治療，甚至挽救過跌傷致重的官員，如康熙年間的大臣齊召南。此外，乾隆年間大臣來保曾獻良馬予皇帝，顯示上駟院對馬匹品質的重視。上駟院衙門位於紫禁城東路，面向西側，並設有馬廄及車房。然而，隨著時間推移，該區域的建築多已倒塌。2013年開始，故宮博物院展開了對上駟院車房的修復工程，完成後作為管理用房使用，以便進一步改善區域環境。整體而言，上駟院在清朝皇室的日常運作中具有不可或缺的作用，不僅體現了皇室對馬匹的精細管理，也反映了清代宮廷生活的細節與制度化運行。",
                color: "rgba(255, 165, 0, 1)"
            },
        ]

        // 添加描述面板的引用
        this.descriptionPanel = document.getElementById('descriptionPanel');
        if (!this.descriptionPanel) {
            this.createDescriptionPanel();
        }
        
        this.bindEvents();
        this.loadMazeImage();
    }

    initMobileView() {
        // 設置viewport
        const viewport = document.querySelector('meta[name=viewport]');
        if (!viewport) {
            const meta = document.createElement('meta');
            meta.name = 'viewport';
            meta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
            document.head.appendChild(meta);
        }

        // 調整畫布大小以適應螢幕
        const updateCanvasSize = () => {
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;
            const screenRatio = screenWidth / screenHeight;
            
            // 保持畫布的原始比例
            const originalRatio = 1500 / 1321; // 原始寬高比
            
            let canvasWidth, canvasHeight;
            if (screenRatio > originalRatio) {
                // 螢幕較寬，以高度為準
                canvasHeight = screenHeight;
                canvasWidth = screenHeight * originalRatio;
            } else {
                // 螢幕較窄，以寬度為準
                canvasWidth = screenWidth;
                canvasHeight = screenWidth / originalRatio;
            }
            
            this.canvas.style.width = `${canvasWidth}px`;
            this.canvas.style.height = `${canvasHeight}px`;
            
            // 保持畫布的實際像素大小
            this.canvas.width = 1500;
            this.canvas.height = 1321;
        };

        // 初始調整大小
        updateCanvasSize();
        
        // 監聽螢幕方向變化
        window.addEventListener('resize', updateCanvasSize);
        window.addEventListener('orientationchange', updateCanvasSize);
    }

    bindTouchEvents() {
        
        // 觸控開始
        this.canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            // 處理點擊建築物
            const touch = e.touches[0];
            const rect = this.canvas.getBoundingClientRect();
            const canvasScaleX = this.canvas.width / rect.width;
            const canvasScaleY = this.canvas.height / rect.height;
            
            const touchX = (touch.clientX - rect.left) * canvasScaleX;
            const touchY = (touch.clientY - rect.top) * canvasScaleY;

            // 檢查所有位置組
            [this.locations1, this.locations2, this.locations3, this.locations4, this.locations5].forEach(locations => {
                locations.forEach(loc => {
                    const scaledX = loc.x * this.zoomFactor + this.offsetX;
                    const scaledY = loc.y * this.zoomFactor + this.offsetY;
                    const scaledWidth = loc.width * this.zoomFactor;
                    const scaledHeight = loc.height * this.zoomFactor;

                    if (
                        touchX >= scaledX &&
                        touchX <= scaledX + scaledWidth &&
                        touchY >= scaledY &&
                        touchY <= scaledY + scaledHeight
                    ) {
                        this.showDescription(loc.text, loc.description);
                    }
                });
            });
            this.isTouching = true;
            
            if (e.touches.length === 2) {
                // 兩指觸控，準備縮放
                this.isMultiTouch = true;
                this.lastTouchDistance = this.getTouchDistance(e.touches);
            } else if (e.touches.length === 1) {
                // 單指觸控
                const touch = e.touches[0];
                this.touchStartX = touch.clientX;
                this.touchStartY = touch.clientY;
                
                // 檢查是否點擊到目標
                this.handleTouchStart(touch);
            }
        });

        // 觸控移動
        this.canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            
            if (!this.isTouching) return;

            if (this.isMultiTouch && e.touches.length === 2) {
                // 處理縮放
                this.handlePinchZoom(e.touches);
            } else if (e.touches.length === 1) {
                // 處理拖曳
                this.handleTouchMove(e.touches[0]);
            }
        });

        // 觸控結束
        this.canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            
            if (e.touches.length === 0) {
                this.isTouching = false;
                this.isMultiTouch = false;
                // 處理觸控結束
                this.handleTouchEnd(e);
            } else if (e.touches.length === 1) {
                this.isMultiTouch = false;
                // 更新單指觸控的起始位置
                this.touchStartX = e.touches[0].clientX;
                this.touchStartY = e.touches[0].clientY;
            }
        });
    }

    // 計算兩指間距離
    getTouchDistance(touches) {
        const dx = touches[0].clientX - touches[1].clientX;
        const dy = touches[0].clientY - touches[1].clientY;
        return Math.sqrt(dx * dx + dy * dy);
    }

    // 修改處理觸控開始的方法
handleTouchStart(touch) {
    const rect = this.canvas.getBoundingClientRect();
    const canvasScaleX = this.canvas.width / rect.width;
    const canvasScaleY = this.canvas.height / rect.height;
    
    const touchX = (touch.clientX - rect.left) * canvasScaleX;
    const touchY = (touch.clientY - rect.top) * canvasScaleY;
    this.lastValidTouchX = touchX;
    this.lastValidTouchY = touchY;

    // 檢查是否點擊到目標
    const dist = Math.sqrt(
        (touchX - this.target.x) ** 2 + 
        (touchY - this.target.y) ** 2
    );

    if (dist < (this.target.radius * this.zoomFactor * 2)) {
        this.target.following = true;
        this.target.color = 'blue';
        this.target.trail = [{ x: this.target.x, y: this.target.y }];
    }
}

handleTouchMove(touch) {
    const rect = this.canvas.getBoundingClientRect();
    const canvasScaleX = this.canvas.width / rect.width;
    const canvasScaleY = this.canvas.height / rect.height;
    
    const touchX = (touch.clientX - rect.left) * canvasScaleX;
    const touchY = (touch.clientY - rect.top) * canvasScaleY;
    
    // 初始化或更新上一個有效的觸控位置
    if (this.lastValidTouchX === undefined) {
        this.lastValidTouchX = touchX;
        this.lastValidTouchY = touchY;
    }
    
    if (this.target.following) {
        // 檢查碰撞
        if (this.isLineCollidingWithObstacle(
            this.lastValidTouchX,
            this.lastValidTouchY,
            touchX,
            touchY
        )) {
            console.log("觸控模式: 檢測到碰撞!");
            
            if (this.target.trail.length >= 5) {
                const trailPoints = [];
                for (let i = 0; i < 5; i++) {
                    trailPoints.push(this.target.trail.pop()); // 移除並保存最後五個點
                }
                
                const lastTrailPoint = trailPoints[trailPoints.length - 1];
                this.target.x = lastTrailPoint.x;
                this.target.y = lastTrailPoint.y;
                
                console.log("觸控模式: 退回到最近的五個點:", trailPoints);
            }
            
            // 停止跟隨並更改目標顏色
            this.target.following = false;
            this.target.color = 'red';
            return;
        }

        // 更新目標位置
        this.target.x = touchX;
        this.target.y = touchY;
        
        // 添加軌跡點
        this.target.trail.push({
            x: this.target.x,
            y: this.target.y
        });
        
        // 限制軌跡長度
        if (this.target.trail.length > 1000) {
            this.target.trail.shift();
        }
        
        // 更新上一個有效的觸控位置
        this.lastValidTouchX = touchX;
        this.lastValidTouchY = touchY;
    } else {
        // 計算移動距離
        const prevX = (this.touchStartX - rect.left) * canvasScaleX;
        const prevY = (this.touchStartY - rect.top) * canvasScaleY;
        const dx = touchX - prevX;
        const dy = touchY - prevY;
        
        // 更新偏移
        this.offsetX += dx;
        this.offsetY += dy;
        
        // 更新目標位置
        this.target.x += dx;
        this.target.y += dy;
        
        // 更新目標軌跡
        this.target.trail = this.target.trail.map(point => ({
            x: point.x + dx,
            y: point.y + dy
        }));
        
        // 更新終點位置
        this.endpoint.x += dx;
        this.endpoint.y += dy;
    }

    // 更新觸控起始位置
    this.touchStartX = touch.clientX;
    this.touchStartY = touch.clientY;
}

    // 修改處理雙指縮放的方法
handlePinchZoom(touches) {
    const currentDistance = this.getTouchDistance(touches);
    const scale = currentDistance / this.lastTouchDistance;
    
    // 計算縮放中心點
    const rect = this.canvas.getBoundingClientRect();
    const canvasScaleX = this.canvas.width / rect.width;
    const canvasScaleY = this.canvas.height / rect.height;
    
    const touch1X = (touches[0].clientX - rect.left) * canvasScaleX;
    const touch1Y = (touches[0].clientY - rect.top) * canvasScaleY;
    const touch2X = (touches[1].clientX - rect.left) * canvasScaleX;
    const touch2Y = (touches[1].clientY - rect.top) * canvasScaleY;
    
    const centerX = (touch1X + touch2X) / 2;
    const centerY = (touch1Y + touch2Y) / 2;
    
    // 檢查新的縮放是否在允許範圍內
    const newZoom = this.zoomFactor * scale;
    if (newZoom >= config.minZoom && newZoom <= config.maxZoom) {
        // 保存當前目標相對於縮放中心的位置
        const targetRelX = this.target.x - centerX;
        const targetRelY = this.target.y - centerY;
        
        this.zoomFactor = newZoom;
        
        // 更新偏移以保持縮放中心點
        this.offsetX = centerX - (centerX - this.offsetX) * scale;
        this.offsetY = centerY - (centerY - this.offsetY) * scale;
        
        // 更新目標位置
        this.target.x = centerX + targetRelX * scale;
        this.target.y = centerY + targetRelY * scale;
        
        // 更新目標軌跡
        this.target.trail = this.target.trail.map(point => ({
            x: centerX + (point.x - centerX) * scale,
            y: centerY + (point.y - centerY) * scale
        }));
        
        // 更新終點位置
        this.updateEndpointPosition();
    }
    
    this.lastTouchDistance = currentDistance;
}

    // 處理觸控結束
    handleTouchEnd(e) {
        if (this.target.following) {
            // 檢查是否到達終點
            this.checkEndpoint();
        }
        
        // 重置觸控狀態
        this.target.following = false;
        this.target.color = 'red';
    }

    initializeCanvas() {
        // 設定固定的畫布大小
        const CANVAS_WIDTH = 1500;  // 或其他你想要的固定寬度
        const CANVAS_HEIGHT = 1321; // 或其他你想要的固定高度
        
        this.canvas.width = CANVAS_WIDTH;
        this.canvas.height = CANVAS_HEIGHT;
        
        // 使用 CSS 來控制顯示大小，保持長寬比
        this.canvas.style.width = '100%';
        this.canvas.style.height = 'auto';
        this.canvas.style.maxWidth = '100%';
        this.canvas.style.objectFit = 'contain';
        
        // 防止畫布被壓縮
        this.canvas.style.imageRendering = 'pixelated';
        this.canvas.style.imageRendering = '-moz-crisp-edges';
        this.canvas.style.imageRendering = 'crisp-edges';
    }
    
    loadMazeImage() {
        this.mazeImage = new Image();
        this.mazeImage.onload = () => {
            // 初始化遊戲狀態
            gameState.isLoading = false;
            gameState.isInitialized = true;
    
            // 繪製迷宮圖像
            this.ctx.drawImage(this.mazeImage, 0, 0, this.canvas.width, this.canvas.height);
    
            // 生成碰撞地圖 (假設已有 generateCollisionMap 方法)
            this.generateCollisionMap();
    
            // 可視化碰撞地圖
            //this.visualizeCollisionMap();
    
            // 開始遊戲循環
            this.startGameLoop();
        };
        this.mazeImage.onerror = (error) => {
            gameState.error = '迷宮圖片載入失敗';
            console.error('圖片載入錯誤:', error);
        };
        this.mazeImage.src = './images/紫禁城平面圖.png';
    }

    generateCollisionMap() {
        const canvasWidth = this.canvas.width;
        const canvasHeight = this.canvas.height;
    
        // 建立空的二維陣列
        const collisionMap = Array.from({ length: canvasHeight }, () => 
            Array(canvasWidth).fill(0)
        );
    
        // 讀取整個畫布的像素資料
        const imageData = this.ctx.getImageData(0, 0, canvasWidth, canvasHeight);
        const data = imageData.data;
    
        for (let y = 0; y < canvasHeight; y++) {
            for (let x = 0; x < canvasWidth; x++) {
                const index = (y * canvasWidth + x) * 4;
                const r = data[index];
                const g = data[index + 1];
                const b = data[index + 2];
                const a = data[index + 3];
    
                // 如果是黑色像素（或近似黑色）
                if (r <= 20 && g <= 20 && b <= 20 && a > 0) {
                    collisionMap[y][x] = 1; // 直接標記為障礙物
                }
            }
        }
    
        this.collisionMap = collisionMap;
        console.log("碰撞地圖生成完成！");
    }

    // 修改建立描述面板的方法
createDescriptionPanel() {
    this.descriptionPanel = document.createElement('div');
    this.descriptionPanel.id = 'descriptionPanel';
    this.descriptionPanel.style.cssText = `
        position: fixed;
        right: 20px;
        top: 20px;
        width: 300px;
        max-height: 80vh;
        padding: 20px;
        background: white;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        visibility: hidden; /* 使用 visibility 代替 display */
        opacity: 0;
        transition: visibility 0s, opacity 0.3s linear; /* 添加過渡效果 */
    `;

    // 創建關閉按鈕
    const closeButton = document.createElement('div');
    closeButton.style.cssText = `
        position: absolute;
        right: 10px;
        top: 10px;
        width: 20px;
        height: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        line-height: 20px;
        color: #666;
    `;
    closeButton.innerHTML = '×';
    closeButton.addEventListener('click', (e) => {
        e.stopPropagation();
        this.hideDescription();
    });

    // 創建內容容器
    this.descriptionContent = document.createElement('div');
    this.descriptionContent.style.cssText = `
        padding-right: 20px;
    `;

    this.descriptionPanel.appendChild(closeButton);
    this.descriptionPanel.appendChild(this.descriptionContent);
    document.body.appendChild(this.descriptionPanel);
}

// 修改顯示描述文字的方法
showDescription(title, description) {
    // 更新內容
    this.descriptionContent.innerHTML = `
        <h3 style="margin: 0 0 10px 0;">${title}</h3>
        <p style="margin: 0;">${description}</p>
    `;
    
    // 顯示面板
    this.descriptionPanel.style.visibility = 'visible';
    this.descriptionPanel.style.opacity = '1';
}

// 修改隱藏描述面板的方法
hideDescription() {
    this.descriptionPanel.style.opacity = '0';
    setTimeout(() => {
        this.descriptionPanel.style.visibility = 'hidden';
    }, 300); // 等待淡出動畫完成
}

    // 更新終點座標的方法
    updateEndpointPosition() {
        this.endpoint.x = this.endpoint.originalX * this.zoomFactor + this.offsetX;
        this.endpoint.y = this.endpoint.originalY * this.zoomFactor + this.offsetY;
    }

    bindEvents() {
        this.canvas.addEventListener('mousemove', this.handleMouseMove.bind(this));
        this.canvas.addEventListener('mousedown', this.handleMouseDown.bind(this));
        this.canvas.addEventListener('mouseup', this.handleMouseUp.bind(this));
        this.canvas.addEventListener('click', this.handleClick.bind(this));
        this.canvas.addEventListener('wheel', this.handleWheel.bind(this));
    }

    // 檢查滑鼠是否在有效範圍內
    isMouseInBounds(mouseX, mouseY) {
        const rect = this.canvas.getBoundingClientRect();
        
        // 添加邊距檢查
        return (
            mouseX >= rect.left + this.boundaryMargin &&
            mouseX <= rect.right - this.boundaryMargin &&
            mouseY >= rect.top + this.boundaryMargin &&
            mouseY <= rect.bottom - this.boundaryMargin
        );
    }

    handleMouseMove(event) {
        const rect = this.canvas.getBoundingClientRect();
        const canvasScaleX = this.canvas.width / rect.width;
        const canvasScaleY = this.canvas.height / rect.height;

        // 將初始的 lastValidMouse 座標轉換為畫布內部座標
        this.lastValidMouseX = (event.clientX - rect.left) * canvasScaleX;
        this.lastValidMouseY = (event.clientY - rect.top) * canvasScaleY;
        
        // 計算當前滑鼠在畫布上的位置
        const currentMouseX = (event.clientX - rect.left) * canvasScaleX;
        const currentMouseY = (event.clientY - rect.top) * canvasScaleY;

        console.log(`目標座標: x=${this.target.x}, y=${this.target.y}`);

        // 檢查滑鼠是否在有效範圍內
        if (!this.isMouseInBounds(event.clientX, event.clientY)) {
            if (this.target.following) {
                this.target.following = false;
                this.target.color = 'red';
                return;
            }
        }

        // 檢查滑鼠是否碰到目標
        const dist = Math.sqrt(
            (currentMouseX - this.target.x) ** 2 + 
            (currentMouseY - this.target.y) ** 2
        );

        // 如果滑鼠碰到目標，自動開始跟隨
        if (dist < (this.target.radius * this.zoomFactor * 2)) {
            if (!this.target.following) {
                this.target.following = true;
                this.target.color = 'blue';
                this.target.trail = [{ x: this.target.x, y: this.target.y }];
            }
        }

        // 初始化或更新上一個有效的滑鼠位置
        if (this.lastValidMouseX === null) {
            this.lastValidMouseX = currentMouseX;
            this.lastValidMouseY = currentMouseY;
        }

        if (this.isDragging) {
            if (!this.target.following) {
                const dx = ((event.clientX - this.lastMouseX) * canvasScaleX);
                const dy = ((event.clientY - this.lastMouseY) * canvasScaleY);
    
                this.offsetX += dx;
                this.offsetY += dy;
    
                this.target.x += dx;
                this.target.y += dy;
                this.target.trail = this.target.trail.map(point => ({
                    x: point.x + dx,
                    y: point.y + dy
                }));
                // 更新終點位置
                this.endpoint.x += dx;
                this.endpoint.y += dy;
            }
            this.lastMouseX = event.clientX;
            this.lastMouseY = event.clientY;
        } 
        
        if (this.target.following) {
            console.log("檢測碰撞:", {
                lastX: this.lastValidMouseX,
                lastY: this.lastValidMouseY,
                currentX: currentMouseX,
                currentY: currentMouseY
            });

            // 檢查碰撞
            if (this.isLineCollidingWithObstacle(
                this.lastValidMouseX,
                this.lastValidMouseY,
                currentMouseX,
                currentMouseY
            )) {
                console.log("檢測到碰撞!");
            
                if (this.target.trail.length >= 5) {
                    const trailPoints = [];
                    for (let i = 0; i < 5; i++) {
                        trailPoints.push(this.target.trail.pop()); // 移除並保存最後五個點
                    }
                
                    const lastTrailPoint = trailPoints[trailPoints.length - 1];
                    this.target.x = lastTrailPoint.x;
                    this.target.y = lastTrailPoint.y;
                
                    console.log("退回到最近的五個點:", trailPoints);
                }
            
                // 停止跟隨並更改目標顏色
                this.target.following = false;
                this.target.color = 'red';
                return;
            }

            // 更新目標位置
            this.target.x = currentMouseX;
            this.target.y = currentMouseY;
            
            // 添加新的軌跡點
            this.target.trail.push({
                x: this.target.x,
                y: this.target.y
            });

            // 限制軌跡長度
            if (this.target.trail.length > 1000) {
                this.target.trail.shift();
            }

            // 更新上一個有效的滑鼠位置
            this.lastValidMouseX = currentMouseX;
            this.lastValidMouseY = currentMouseY;
        }
    }

    handleMouseDown(event) {
        const { clientX: mouseX, clientY: mouseY } = event;

        if (event.button === 0) { // 左鍵
            this.isDragging = true;
            this.lastMouseX = mouseX;
            this.lastMouseY = mouseY;
        }
    }

    handleMouseUp() {
        this.isDragging = false;
    }

    // 更新處理點擊事件
    handleClick(event) {
        const rect = this.canvas.getBoundingClientRect();
        const canvasScaleX = this.canvas.width / rect.width;
        const canvasScaleY = this.canvas.height / rect.height;
        
        // 轉換滑鼠座標到畫布座標系統
        const adjustedMouseX = (event.clientX - rect.left) * canvasScaleX;
        const adjustedMouseY = (event.clientY - rect.top) * canvasScaleY;

        // 檢查是否點擊了目標
        if (this.isMouseOnTarget(event.clientX, event.clientY)) {
            this.target.following = !this.target.following;
            if (this.target.following) {
                this.target.trail = [{ x: this.target.x, y: this.target.y }];
                this.target.color = 'blue';
            } else {
                this.target.color = 'red';
            }
            return;
        }

        // 檢查是否點擊了地點物件
        const clickedLocation1 = this.locations1.find(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            return (
                adjustedMouseX >= scaledX &&
                adjustedMouseX <= scaledX + scaledWidth &&
                adjustedMouseY >= scaledY &&
                adjustedMouseY <= scaledY + scaledHeight
            );
        });
        const clickedLocation2 = this.locations2.find(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            return (
                adjustedMouseX >= scaledX &&
                adjustedMouseX <= scaledX + scaledWidth &&
                adjustedMouseY >= scaledY &&
                adjustedMouseY <= scaledY + scaledHeight
            );
        });
        const clickedLocation3 = this.locations3.find(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            return (
                adjustedMouseX >= scaledX &&
                adjustedMouseX <= scaledX + scaledWidth &&
                adjustedMouseY >= scaledY &&
                adjustedMouseY <= scaledY + scaledHeight
            );
        });
        const clickedLocation4 = this.locations4.find(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            return (
                adjustedMouseX >= scaledX &&
                adjustedMouseX <= scaledX + scaledWidth &&
                adjustedMouseY >= scaledY &&
                adjustedMouseY <= scaledY + scaledHeight
            );
        });
        const clickedLocation5 = this.locations5.find(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            return (
                adjustedMouseX >= scaledX &&
                adjustedMouseX <= scaledX + scaledWidth &&
                adjustedMouseY >= scaledY &&
                adjustedMouseY <= scaledY + scaledHeight
            );
        });


        if (clickedLocation1) {
            this.showDescription(clickedLocation1.text, clickedLocation1.description);
        }
        if (clickedLocation2) {
            this.showDescription(clickedLocation2.text, clickedLocation2.description);
        }
        if (clickedLocation3) {
            this.showDescription(clickedLocation3.text, clickedLocation3.description);
        }
        if (clickedLocation4) {
            this.showDescription(clickedLocation4.text, clickedLocation4.description);
        }
        if (clickedLocation5) {
            this.showDescription(clickedLocation5.text, clickedLocation5.description);
        }
    }

    

    // 更新縮放處理
    handleWheel(event) {
        event.preventDefault();
        
        if (this.target.following) return;

        const { clientX: mouseX, clientY: mouseY, deltaY } = event;
        const zoomDirection = deltaY < 0 ? 1 : -1;
        const zoomFactor = 1 + zoomDirection * config.zoomSpeed;
        const newZoom = this.zoomFactor * zoomFactor;

        if (newZoom >= config.minZoom && newZoom <= config.maxZoom) {
            const rect = this.canvas.getBoundingClientRect();
            const mousePos = {
                x: mouseX - this.offsetX,
                y: mouseY - this.offsetY
            };

            this.zoomFactor = newZoom;
            this.offsetX = mouseX - mousePos.x * zoomFactor;
            this.offsetY = mouseY - mousePos.y * zoomFactor;

            // 更新目標位置
            const targetRelativeX = (this.target.x - mouseX) * zoomFactor;
            const targetRelativeY = (this.target.y - mouseY) * zoomFactor;
            this.target.x = mouseX + targetRelativeX;
            this.target.y = mouseY + targetRelativeY;

            // 更新終點位置
            this.updateEndpointPosition();

            // 更新軌跡點
            this.target.trail = this.target.trail.map(point => ({
                x: mouseX + (point.x - mouseX) * zoomFactor,
                y: mouseY + (point.y - mouseY) * zoomFactor
            }));
        }
    }

    isMouseOnTarget(mouseX, mouseY) {
        const rect = this.canvas.getBoundingClientRect();
        const canvasScaleX = this.canvas.width / rect.width;
        const canvasScaleY = this.canvas.height / rect.height;
        
        // 轉換滑鼠座標到畫布座標系統
        const adjustedMouseX = (mouseX - rect.left) * canvasScaleX;
        const adjustedMouseY = (mouseY - rect.top) * canvasScaleY;
        
        // 計算距離，考慮縮放和偏移
        const dist = Math.sqrt(
            (adjustedMouseX - this.target.x) ** 2 + 
            (adjustedMouseY - this.target.y) ** 2
        );
        
        return dist < (this.target.radius * this.zoomFactor * 2);
    }

    isLineCollidingWithObstacle(x1, y1, x2, y2) {
        if (!this.collisionMap) {
            console.error("碰撞地圖未生成！");
            return false;
        }
    
        // 將螢幕座標轉換為原始圖像座標
        const adjustedX1 = Math.round((x1 - this.offsetX) / this.zoomFactor);
        const adjustedY1 = Math.round((y1 - this.offsetY) / this.zoomFactor);
        const adjustedX2 = Math.round((x2 - this.offsetX) / this.zoomFactor);
        const adjustedY2 = Math.round((y2 - this.offsetY) / this.zoomFactor);
    
        const distance = Math.sqrt((adjustedX2 - adjustedX1) ** 2 + (adjustedY2 - adjustedY1) ** 2);
        const steps = Math.max(Math.ceil(distance), 10);
    
        for (let i = 0; i <= steps; i++) {
            const t = i / steps;
            const x = Math.round(adjustedX1 + (adjustedX2 - adjustedX1) * t);
            const y = Math.round(adjustedY1 + (adjustedY2 - adjustedY1) * t);
    
            // 確保不超出地圖邊界
            if (
                x >= 0 && x < this.collisionMap[0].length &&
                y >= 0 && y < this.collisionMap.length
            ) {
                if (this.collisionMap[y][x] === 1) {
                    console.log("碰撞發生於點:", { x, y });
                    return true;
                }
            }
        }
    
        return false;
    }

    // 添加圖片轉換動畫
    startTransition() {
        this.isTransitioning = true;
        this.fadeAlpha = 0;
        this.congratsAlpha = 0;
        
        // 開始轉換動畫
        const animate = () => {
            if (this.fadeAlpha < 1) {
                this.fadeAlpha += 0.02; // 控制漸變速度
                requestAnimationFrame(animate);
            } else {
                // 當圖片完全切換後，開始顯示文字
                this.showCongratulation();
            }
        };
        
        animate();
    }

    // 顯示祝賀文字
    showCongratulation() {
        const animateText = () => {
            if (this.congratsAlpha < 1) {
                this.congratsAlpha += 0.02; // 控制文字顯示速度
                requestAnimationFrame(animateText);
            }
        };
        
        animateText();

        // 3秒後隱藏祝賀文字
        if (this.congratsTimeout) {
            clearTimeout(this.congratsTimeout);
        }
        this.congratsTimeout = setTimeout(() => {
            const fadeOutText = () => {
                if (this.congratsAlpha > 0) {
                    this.congratsAlpha -= 0.02; // 控制文字消失速度
                    requestAnimationFrame(fadeOutText);
                }
            };
            fadeOutText();
        }, 10000);
    }

    // 添加新的方法檢查是否到達終點
    checkEndpoint() {
        if (this.hasReachedEnd) return;

        const distance = Math.sqrt(
            (this.target.x - this.endpoint.x) ** 2 + 
            (this.target.y - this.endpoint.y) ** 2
        );

         // 考慮縮放後的半徑
         const scaledRadius = this.endpoint.radius * this.zoomFactor;

        if (distance < this.endpoint.radius + this.target.radius) {
            this.hasReachedEnd = true;
            this.startTransition();
        }
    }

    // 更新繪製函數
    draw() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

        // 繪製迷宮背景
        if (gameState.isInitialized) {
            this.ctx.save();
            this.ctx.translate(this.offsetX, this.offsetY);
            this.ctx.scale(this.zoomFactor, this.zoomFactor);

            // 繪製原始圖片
            this.ctx.drawImage(
                this.mazeImage,
                0,
                0,
                this.canvas.width,
                this.canvas.height
            );

            // 如果正在轉換，疊加彩色圖片
            if (this.isTransitioning) {
                this.ctx.globalAlpha = this.fadeAlpha;
                this.ctx.drawImage(
                    this.coloredImage,
                    0,
                    0,
                    this.canvas.width,
                    this.canvas.height
                );
                this.ctx.globalAlpha = 1;
            }

            this.ctx.restore();
        }

        // 繪製地點物件
        this.drawLocations();

        // 繪製目標和軌跡
        this.drawTarget();

        // 檢查是否到達終點
        this.checkEndpoint();

        // 如果正在顯示祝賀文字
        if (this.congratsAlpha > 0) {
            this.ctx.save();
            this.ctx.globalAlpha = this.congratsAlpha;
            this.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
            
            this.ctx.fillStyle = 'gold';
            this.ctx.font = 'bold 72px Arial';
            this.ctx.textAlign = 'center';
            this.ctx.textBaseline = 'middle';
            
            // 添加文字陰影效果
            this.ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
            this.ctx.shadowBlur = 10;
            this.ctx.shadowOffsetX = 5;
            this.ctx.shadowOffsetY = 5;
            
            // 繪製文字並添加簡單的動畫效果
            const baseY = this.canvas.height / 2;
            const amplitude = 10; // 上下浮動的幅度
            const frequency = 0.002; // 浮動的頻率
            const y = baseY + Math.sin(Date.now() * frequency) * amplitude;
            
            this.ctx.fillText('恭喜通關！', this.canvas.width / 2, y);
            this.ctx.restore();
        }

        // 其他載入中或錯誤訊息的繪製保持不變
        if (gameState.isLoading) {
            this.drawMessage('載入中...');
        } else if (gameState.error) {
            this.drawMessage(gameState.error, 'red');
        }
    }

    // 繪製地點物件
    drawLocations() {
        this.locations1.forEach(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            // 繪製半透明背景
            this.ctx.fillStyle = loc.color;
            this.ctx.fillRect(scaledX, scaledY, scaledWidth, scaledHeight);

            // 繪製文字
            this.ctx.fillStyle = 'black';
            const fontSize = 12 * this.zoomFactor; // 增加基礎字體大小
            this.ctx.font = `bold ${fontSize}px Arial`; // 添加粗體
            this.ctx.textAlign = 'center';
            this.ctx.textBaseline = 'middle'; // 確保垂直置中
            this.ctx.fillText(
                loc.text,
                scaledX + scaledWidth / 2,
                scaledY + scaledHeight / 2
            );
        });
        this.locations2.forEach(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            // 繪製半透明背景
            this.ctx.fillStyle = loc.color;
            this.ctx.fillRect(scaledX, scaledY, scaledWidth, scaledHeight);

            // 繪製文字
            this.ctx.fillStyle = 'black';
            const fontSize = 24 * this.zoomFactor; // 增加基礎字體大小
            this.ctx.font = `bold ${fontSize}px Arial`; // 添加粗體
            this.ctx.textAlign = 'center';
            this.ctx.textBaseline = 'middle'; // 確保垂直置中
            this.ctx.fillText(
                loc.text,
                scaledX + scaledWidth / 2,
                scaledY + scaledHeight / 2
            );
        });
        this.locations3.forEach(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            // 繪製半透明背景
            this.ctx.fillStyle = loc.color;
            this.ctx.fillRect(scaledX, scaledY, scaledWidth, scaledHeight);

            // 設置文字樣式
            this.ctx.fillStyle =  'black';
            const fontSize = 12 * this.zoomFactor;
            this.ctx.font = `bold ${fontSize}px Arial`;
            this.ctx.textAlign = 'center';
            this.ctx.textBaseline = 'middle';

            // 計算每個字符的位置
            const chars = loc.text.split('');
            const totalHeight = chars.length * fontSize;
            const startY = scaledY + (scaledHeight - totalHeight) / 2;
            const centerX = scaledX + scaledWidth / 2;

            // 逐個繪製字符
            chars.forEach((char, index) => {
                const charY = startY + (index + 0.5) * fontSize;
                this.ctx.fillText(char, centerX, charY);
            });
        });
        this.locations4.forEach(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            // 繪製半透明背景
            this.ctx.fillStyle = loc.color;
            this.ctx.fillRect(scaledX, scaledY, scaledWidth, scaledHeight);

            // 繪製文字
            this.ctx.fillStyle = 'black';
            const fontSize = 6 * this.zoomFactor; // 增加基礎字體大小
            this.ctx.font = `bold ${fontSize}px Arial`; // 添加粗體
            this.ctx.textAlign = 'center';
            this.ctx.textBaseline = 'middle'; // 確保垂直置中
            this.ctx.fillText(
                loc.text,
                scaledX + scaledWidth / 2,
                scaledY + scaledHeight / 2
            );
        });
        this.locations5.forEach(loc => {
            const scaledX = loc.x * this.zoomFactor + this.offsetX;
            const scaledY = loc.y * this.zoomFactor + this.offsetY;
            const scaledWidth = loc.width * this.zoomFactor;
            const scaledHeight = loc.height * this.zoomFactor;

            // 繪製半透明背景
            this.ctx.fillStyle = loc.color;
            this.ctx.fillRect(scaledX, scaledY, scaledWidth, scaledHeight);

            // 設置文字樣式
            this.ctx.fillStyle =  'black';
            const fontSize = 6 * this.zoomFactor;
            this.ctx.font = `bold ${fontSize}px Arial`;
            this.ctx.textAlign = 'center';
            this.ctx.textBaseline = 'middle';

            // 計算每個字符的位置
            const chars = loc.text.split('');
            const totalHeight = chars.length * fontSize;
            const startY = scaledY + (scaledHeight - totalHeight) / 2;
            const centerX = scaledX + scaledWidth / 2;

            // 逐個繪製字符
            chars.forEach((char, index) => {
                const charY = startY + (index + 0.5) * fontSize;
                this.ctx.fillText(char, centerX, charY);
            });
        });
    }
    
    visualizeCollisionMap() {
        if (!this.collisionMap) {
            console.error("碰撞地圖未生成！");
            return;
        }
    
        this.ctx.save();
    
        // 考慮偏移與縮放
        this.ctx.translate(this.offsetX, this.offsetY);
        this.ctx.scale(this.zoomFactor, this.zoomFactor);
    
        // 遍歷碰撞地圖
        for (let y = 0; y < this.collisionMap.length; y++) {
            for (let x = 0; x < this.collisionMap[0].length; x++) {
                if (this.collisionMap[y][x] === 1) {
                    // 使用半透明紅色繪製障礙物
                    this.ctx.fillStyle = "rgba(255, 0, 0, 0.3)";
                    this.ctx.fillRect(x, y, 1, 1);
                }
            }
        }
    
        this.ctx.restore();
    }

    drawTarget() {
        const scaledRadius = this.target.radius * this.zoomFactor;

        // 繪製軌跡
        if (this.target.trail.length > 1) {
            this.ctx.strokeStyle = `rgba(255, 0, 0, ${config.trailOpacity})`;
            this.ctx.beginPath();
            this.ctx.moveTo(this.target.trail[0].x, this.target.trail[0].y);
            this.target.trail.forEach(point => {
                this.ctx.lineTo(point.x, point.y);
            });
            this.ctx.stroke();
        }

        // 繪製目標外框
        this.ctx.strokeStyle = this.target.borderColor;
        this.ctx.lineWidth = 2;
        this.ctx.beginPath();
        this.ctx.arc(this.target.x, this.target.y, scaledRadius + 2, 0, Math.PI * 2);
        this.ctx.stroke();

        // 繪製目標填充
        this.ctx.fillStyle = this.target.color;
        this.ctx.beginPath();
        this.ctx.arc(this.target.x, this.target.y, scaledRadius, 0, Math.PI * 2);
        this.ctx.fill();
    }

    drawMessage(message, color = 'black') {
        this.ctx.fillStyle = color;
        this.ctx.font = '20px Arial';
        this.ctx.textAlign = 'center';
        this.ctx.fillText(
            message,
            this.canvas.width / 2,
            this.canvas.height / 2
        );
    }

    startGameLoop() {
        const gameLoop = () => {
            this.draw();
            requestAnimationFrame(gameLoop);
        };
        gameLoop();
    }
}

// 初始化遊戲
const game = new MazeGame('gameCanvas');
